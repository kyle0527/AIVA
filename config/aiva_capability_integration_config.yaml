# AIVA æ ¸å¿ƒèƒ½åŠ›æ¨¡çµ„ä¸²æ¥é…ç½®
# å®šç¾©æ‰€æœ‰å¯ç”¨èƒ½åŠ›æ¨¡çµ„åŠå…¶èˆ‡5Mç¥ç¶“ç¶²è·¯çš„ä¸²æ¥è¦å‰‡

capabilities:
  # ğŸ” éœæ…‹åˆ†æèƒ½åŠ›
  static_analysis:
    name: "éœæ…‹ç¨‹å¼ç¢¼åˆ†æ"
    description: "åˆ†æç¨‹å¼ç¢¼çµæ§‹ã€è¤‡é›œåº¦ã€å®‰å…¨æ¨¡å¼"
    priority: high
    output_features: 90  # ç¨‹å¼ç¢¼ç‰¹å¾µç¶­åº¦
    modules:
      - code_complexity_analyzer
      - security_pattern_detector
      - dependency_analyzer
      - ast_explorer
    integration:
      feature_extraction: "extract_code_features"
      neural_input_mapping: "code_features[90]"
  
  # ğŸ›¡ï¸ æ¼æ´æƒæèƒ½åŠ›  
  vulnerability_scanning:
    name: "æ¼æ´æª¢æ¸¬æƒæ"
    description: "æª¢æ¸¬SQLæ³¨å…¥ã€XSSã€SSRFç­‰å¸¸è¦‹æ¼æ´"
    priority: critical
    output_features: 100  # æ¼æ´ç‰¹å¾µç¶­åº¦
    modules:
      - sql_injection_scanner
      - xss_detector
      - ssrf_scanner
      - file_inclusion_detector
      - command_injection_scanner
    integration:
      feature_extraction: "extract_vulnerability_features"
      neural_input_mapping: "vulnerability_features[100]"
  
  # ğŸŒ ç¶²è·¯åµå¯Ÿèƒ½åŠ›
  network_reconnaissance:
    name: "ç¶²è·¯åµå¯Ÿåˆ†æ"
    description: "ç«¯å£æƒæã€æœå‹™è­˜åˆ¥ã€ä½œæ¥­ç³»çµ±æŒ‡ç´‹è­˜åˆ¥"
    priority: high
    output_features: 80  # ç¶²è·¯ç‰¹å¾µç¶­åº¦
    modules:
      - port_scanner
      - service_detector
      - os_fingerprinter
      - waf_detector
      - cdn_detector
    integration:
      feature_extraction: "extract_network_features"
      neural_input_mapping: "network_features[80]"
  
  # âš–ï¸ é¢¨éšªè©•ä¼°èƒ½åŠ›
  risk_assessment:
    name: "ç¶œåˆé¢¨éšªè©•ä¼°"
    description: "CVSSè©•åˆ†ã€å¨è„…æƒ…å ±æ•´åˆã€è³‡ç”¢åƒ¹å€¼åˆ†æ"
    priority: critical
    output_features: 60  # é¢¨éšªç‰¹å¾µç¶­åº¦
    modules:
      - cvss_calculator
      - threat_intelligence
      - asset_valuation
      - regulatory_assessment
    integration:
      feature_extraction: "extract_risk_features"
      neural_input_mapping: "risk_features[60]"
  
  # ğŸ’¥ æ”»æ“Šæ¨¡æ“¬èƒ½åŠ›
  web_attack:
    name: "ç¶²ç«™æ”»æ“Šæ¸¬è©¦"
    description: "æ¨¡æ“¬å„ç¨®æ”»æ“Šå‘é‡é©—è­‰å®‰å…¨æ€§"
    priority: medium
    output_features: 70  # æ”»æ“Šç‰¹å¾µç¶­åº¦
    modules:
      - attack_vector_tester
      - payload_generator
      - defense_bypass_tester
      - success_rate_calculator
    integration:
      feature_extraction: "extract_attack_features" 
      neural_input_mapping: "attack_features[70]"
  
  # ğŸ“Š æƒ…å ±æ”¶é›†èƒ½åŠ›
  intelligence_gathering:
    name: "ç›®æ¨™æƒ…å ±æ”¶é›†"
    description: "æŠ€è¡“æ£§è­˜åˆ¥ã€çµ„ç¹”åˆ†æã€æ­·å²æ”»æ“Šè¨˜éŒ„"
    priority: medium
    output_features: 50  # æƒ…å ±ç‰¹å¾µç¶­åº¦
    modules:
      - technology_stack_analyzer
      - organization_profiler
      - attack_history_analyzer
      - social_media_intelligence
    integration:
      feature_extraction: "extract_intelligence_features"
      neural_input_mapping: "intel_features[50]"
  
  # ğŸ” ç¨‹å¼æ¢ç´¢èƒ½åŠ›
  code_exploration:
    name: "æ·±åº¦ç¨‹å¼æ¢ç´¢"
    description: "å‡½æ•¸è¿½è¹¤ã€è³‡æ–™æµåˆ†æã€å‘¼å«åœ–å»ºæ§‹"
    priority: high
    output_features: 0  # ä½µå…¥éœæ…‹åˆ†æ
    modules:
      - function_tracer
      - data_flow_analyzer
      - call_graph_builder
      - control_flow_analyzer
    integration:
      feature_extraction: "merge_with_static_analysis"
      neural_input_mapping: "included_in_code_features"

# ğŸ§  5Mç¥ç¶“ç¶²è·¯æ•´åˆé…ç½®
neural_network:
  model_name: "AIVA-5M-Specialized"
  parameters: 4999481
  input_dimension: 512
  architecture:
    input_layer: 512
    hidden_layers: [1650, 1200, 1000, 600, 300]
    main_output: 100    # ä¸»è¦æ±ºç­–è¼¸å‡º
    aux_output: 531     # è¼”åŠ©ç‰¹å¾µè¼¸å‡º
  
  # ç‰¹å¾µå‘é‡çµ„æˆ (ç¸½è¨ˆ512ç¶­)
  feature_mapping:
    vulnerability_features: 100  # æ¼æ´ç‰¹å¾µ
    network_features: 80         # ç¶²è·¯ç‰¹å¾µ  
    code_features: 90           # ç¨‹å¼ç¢¼ç‰¹å¾µ
    risk_features: 60           # é¢¨éšªç‰¹å¾µ
    attack_features: 70         # æ”»æ“Šç‰¹å¾µ
    intel_features: 50          # æƒ…å ±ç‰¹å¾µ
    meta_features: 62           # å…ƒç‰¹å¾µ(åŸ·è¡Œç‹€æ…‹ã€ä¿¡å¿ƒåº¦ç­‰)
  
  # AIæ±ºç­–è¼¸å‡ºè§£é‡‹
  output_classes:
    0: "ç¹¼çºŒæ·±åº¦æƒæ"
    1: "ç«‹å³åœæ­¢æ”»æ“Š"
    2: "åˆ‡æ›æ”»æ“Šå‘é‡"
    3: "æå‡æ¬Šé™å˜—è©¦"
    4: "è³‡æ–™å¤–æ´©æ¨¡æ“¬"
    5: "æ©«å‘ç§»å‹•æ¢ç´¢"
    10: "ç”Ÿæˆè©³ç´°å ±å‘Š"
    50: "éœ€è¦äººå·¥å¹²é "
    99: "ä»»å‹™å®Œæˆ"

# ğŸ”„ èƒ½åŠ›ä¸²æ¥åŸ·è¡Œæµç¨‹
execution_workflow:
  # éšæ®µ1: åŸºç¤åµå¯Ÿ
  phase_1_reconnaissance:
    sequence: [network_reconnaissance, intelligence_gathering]
    parallel: true
    timeout: 30s
    
  # éšæ®µ2: æ·±åº¦åˆ†æ  
  phase_2_analysis:
    sequence: [static_analysis, code_exploration, vulnerability_scanning]
    parallel: true
    timeout: 60s
    depends_on: phase_1_reconnaissance
    
  # éšæ®µ3: é¢¨éšªè©•ä¼°
  phase_3_assessment:
    sequence: [risk_assessment, web_attack]
    parallel: false  # é †åºåŸ·è¡Œ
    timeout: 45s
    depends_on: phase_2_analysis
    
  # éšæ®µ4: AIæ±ºç­–
  phase_4_decision:
    sequence: [neural_network_inference]
    parallel: false
    timeout: 5s
    depends_on: phase_3_assessment

# ğŸ“ˆ è³‡æ–™æµå‘é…ç½®
data_flow:
  # èƒ½åŠ›æ¨¡çµ„ â†’ ç‰¹å¾µæå–å™¨
  capability_to_feature_extractor:
    interface: "CapabilityResult"
    format: "structured_json"
    validation: "schema_check"
    
  # ç‰¹å¾µæå–å™¨ â†’ ç¥ç¶“ç¶²è·¯
  feature_extractor_to_neural_network:
    interface: "numpy.ndarray[512]"
    format: "float32_tensor"
    preprocessing: "normalization"
    
  # ç¥ç¶“ç¶²è·¯ â†’ æ±ºç­–å¼•æ“
  neural_network_to_decision_engine:
    interface: "torch.Tensor"
    format: "softmax_probabilities"
    postprocessing: "confidence_calibration"

# âš™ï¸ æ•´åˆå„ªåŒ–é…ç½®
integration_optimization:
  # æ•ˆèƒ½å„ªåŒ–
  performance:
    parallel_execution: true
    max_concurrent_capabilities: 4
    feature_caching: true
    neural_inference_batching: true
    
  # å“è³ªæ§åˆ¶
  quality_control:
    min_confidence_threshold: 0.7
    result_validation: true
    error_recovery: "graceful_degradation"
    logging_level: "detailed"
    
  # è³‡æºç®¡ç†  
  resource_management:
    memory_limit: "2GB"
    cpu_cores: 4
    execution_timeout: "5min"
    cleanup_after_execution: true