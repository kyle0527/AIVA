# AIVA 標準化決策流程指南

**版本**: 1.0  
**生效日期**: 2025-11-04  
**適用範圍**: 所有 AIVA 開發團隊

## 🎯 **核心原則**

> **"如果官方標準存在，就應該直接使用官方標準，而不是重新發明輪子"**

---

## 📋 **標準化決策流程**

### 🔍 **步驟 1: 需求識別**
```
問題: 需要定義新的枚舉、分類、格式或協議
```

### 🏛 **步驟 2: 國際標準檢查**
```
檢查是否存在相關的國際標準：
- ISO (國際標準化組織)
- IEC (國際電工委員會)  
- ITU (國際電信聯盟)
- W3C (萬維網聯盟)
- RFC (請求評議)
```
**決策**: 如果存在 → 💡 **使用國際標準**

### 🏢 **步驟 3: 行業標準檢查**  
```
檢查是否存在相關的行業標準：
- OWASP (開放網絡應用安全項目)
- NIST (美國國家標準與技術研究院)
- MITRE (非營利研究組織)
- SANS (安全培訓組織)
- CIS (互聯網安全中心)
```
**決策**: 如果存在 → 💡 **使用行業標準**

### 🔧 **步驟 4: 技術標準檢查**
```
檢查是否存在相關的技術標準：
- CVSS (通用漏洞評分系統)
- CWE (通用弱點枚舉)  
- STIX/TAXII (威脅情報交換)
- OpenAPI/AsyncAPI (API 規範)
- SARIF (靜態分析結果格式)
```
**決策**: 如果存在 → 💡 **使用技術標準**

### 🎨 **步驟 5: 自定義標準創建**
```
僅在前三步都無相關標準時，才創建自定義標準
要求：
1. 充分的文檔化
2. 明確的業務理由
3. 定期重新評估
4. 向後相容性考慮
```

---

## ✅ **標準優先級矩陣**

| 優先級 | 標準類型 | 適用場景 | 示例 |
|--------|---------|----------|------|
| 🥇 **1** | 國際標準 | 通用技術協議 | RFC 7231 (HTTP), ISO 27001 |
| 🥈 **2** | 行業標準 | 安全和最佳實踐 | OWASP Top 10, NIST Framework |  
| 🥉 **3** | 技術標準 | 專業領域標準 | CVSS v4.0, OpenAPI 3.1 |
| 🎯 **4** | 自定義標準 | AIVA 特有業務 | TaskType, ModuleName |

---

## 📚 **標準檢查清單**

### ✅ **安全相關**
- [ ] **CVSS v4.0**: 漏洞嚴重程度 → 使用 `CVSSSeverity`
- [ ] **CWE**: 弱點分類 → 格式: `CWE-XXX`  
- [ ] **CVE**: 漏洞標識 → 格式: `CVE-YYYY-NNNNN`
- [ ] **MITRE ATT&CK**: 攻擊戰術技術
- [ ] **OWASP**: 安全分類和最佳實踐

### ✅ **網絡協議**  
- [ ] **HTTP**: RFC 7230-7235 → 使用 `HTTPStatusClass`
- [ ] **TCP/IP**: RFC 793, 768, 791, 8200
- [ ] **TLS**: RFC 8446 (TLS 1.3)
- [ ] **DNS**: RFC 1035

### ✅ **資料格式**
- [ ] **JSON**: RFC 8259
- [ ] **XML**: W3C 標準  
- [ ] **MIME Types**: IANA 官方註冊
- [ ] **Character Sets**: IANA 字符集

### ✅ **API 標準**
- [ ] **OpenAPI**: 3.1 官方規範
- [ ] **AsyncAPI**: 3.0 官方規範
- [ ] **GraphQL**: 官方規範
- [ ] **JSON Schema**: Draft 2020-12

---

## 🚫 **避免的反模式**

### ❌ **錯誤示例**
```python
# 錯誤：重新發明 CVSS 嚴重程度
class Severity(str, Enum):
    CRITICAL = "critical" 
    HIGH = "high"
    MEDIUM = "medium"  
    LOW = "low"
```

### ✅ **正確示例**  
```python  
# 正確：使用 CVSS v4.0 官方標準
class CVSSSeverity(str, Enum):
    """CVSS v4.0 官方嚴重程度等級"""
    NONE = "None"        # 0.0
    LOW = "Low"          # 0.1-3.9
    MEDIUM = "Medium"    # 4.0-6.9  
    HIGH = "High"        # 7.0-8.9
    CRITICAL = "Critical" # 9.0-10.0
```

---

## 🔄 **標準維護流程**

### 📅 **定期審查** (每季度)
1. **標準更新檢查**: 監控官方標準版本更新
2. **自定義標準評估**: 檢查是否有新的官方標準可替代
3. **廢棄標準清理**: 移除過時的自定義定義
4. **文檔更新**: 保持標準引用的準確性

### 🆕 **新標準採納流程**
1. **影響評估**: 分析採用新標準的影響範圍
2. **遷移計劃**: 制定從舊標準到新標準的遷移路徑  
3. **向後相容**: 提供過渡期的相容性支援
4. **文檔更新**: 更新所有相關文檔和範例

---

## 🎯 **成功指標**

### 📊 **量化目標**
- **標準化率**: ≥ 95%
- **官方標準使用率**: ≥ 90%  
- **自定義標準比例**: ≤ 10%
- **標準文檔覆蓋率**: 100%

### 🏆 **質化目標**
- ✅ 所有技術標準完全合規
- ✅ 自定義標準都有充分的業務理由  
- ✅ 標準選擇過程透明且有文檔
- ✅ 定期審查和更新機制有效

---

## 🛠 **實施工具**

### 🔍 **標準檢查工具**
```bash
# 檢查未使用官方標準的枚舉
python scripts/check_standards_compliance.py

# 生成標準使用報告  
python scripts/generate_standards_report.py

# 驗證標準格式正確性
python scripts/validate_standard_formats.py
```

### 📋 **Code Review 檢查項**
- [ ] 是否使用了已存在的官方標準？
- [ ] 自定義標準是否有充分理由？  
- [ ] 標準引用和版本是否正確？
- [ ] 向後相容性是否考慮？

---

## 📞 **聯絡資訊**

**標準化委員會**: standards@aiva.dev  
**技術審查**: tech-review@aiva.dev  
**文檔更新**: docs@aiva.dev

---

**記住**: **標準化不是為了限制創新，而是為了建立在堅實的基礎上創新！** 🚀