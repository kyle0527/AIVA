flowchart TB
    n1([開始])
    n2([結束])
    n3[assets: list&#91;Asset&#93; = &#91;&#93;]
    n4[forms = 0]
    n5{if &amp;&#35;39;text/html&amp;&#35;39; in response.hea...}
    n6[soup = BeautifulSoup&#40;respon...]
    n7[forms_list = soup.find_all&#40;&amp;&#35;39;form&amp;&#35...]
    n8{for form in forms_list}
    n9{if not hasattr&#40;form, &amp;&#35;39;get&amp;&#35;39;&#4...}
    n10[continue]
    n11[]
    n12[action = form.get&#40;&amp;&#35;39;action&amp;&#35;39;&#41;]
    n13{if isinstance&#40;action, str &#124; ty...}
    n14[action_url = action or base_url]
    n15[full = urljoin&#40;base_url, ac...]
    n16[continue]
    n17[]
    n18[params = &#91;&#93;]
    n19[input_elements = form.find_all&#40;&amp;&#35;39;input...]
    n20{for input_elem in input_elements}
    n21{if hasattr&#40;input_elem, &amp;&#35;39;get&amp;&#35;39;&...}
    n22[name = input_elem.get&#40;&amp;&#35;39;name...]
    n23{if isinstance&#40;name, str&#41;}
    n24[params.append&#40;name&#41;]
    n25[]
    n26[]
    n27[]
    n28[assets.append&#40;Asset&#40;asset_id=new_id&#40;&amp;&#35...]
    n29[forms += 1]
    n30[]
    n31[links_list = soup.find_all&#40;&amp;&#35;39;a&amp;&#35;39...]
    n32{for a in links_list}
    n33{if not hasattr&#40;a, &amp;&#35;39;get&amp;&#35;39;&#41;}
    n34[continue]
    n35[]
    n36[href = a.get&#40;&amp;&#35;39;href&amp;&#35;39;&#41;]
    n37{if isinstance&#40;href, str&#41;}
    n38[assets.append&#40;Asset&#40;asset_id=new_id&#40;&amp;&#35...]
    n39[]
    n40[]
    n41[]
    n42[return &#40;assets, forms&#41;]
    n1 --> n3
    n3 --> n4
    n4 --> n5
    n5 -->|Yes| n6
    n5 -->|No| n41
    n6 --> n7
    n7 --> n8
    n8 -->|Yes| n9
    n8 -->|No| n30
    n9 -->|Yes| n10
    n9 -->|No| n11
    n10 --> n11
    n11 --> n12
    n12 --> n13
    n13 -->|Yes| n14
    n13 -->|No| n16
    n14 --> n15
    n15 --> n17
    n16 --> n17
    n17 --> n18
    n18 --> n19
    n19 --> n20
    n20 -->|Yes| n21
    n20 -->|No| n27
    n21 -->|Yes| n22
    n21 -->|No| n26
    n22 --> n23
    n23 -->|Yes| n24
    n23 -->|No| n25
    n24 --> n25
    n25 --> n26
    n26 --> n20
    n27 --> n28
    n28 --> n29
    n29 --> n8
    n30 --> n31
    n31 --> n32
    n32 -->|Yes| n33
    n32 -->|No| n40
    n33 -->|Yes| n34
    n33 -->|No| n35
    n34 --> n35
    n35 --> n36
    n36 --> n37
    n37 -->|Yes| n38
    n37 -->|No| n39
    n38 --> n39
    n39 --> n32
    n40 --> n41
    n41 --> n42
    n42 --> n2