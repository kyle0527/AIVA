flowchart TB
    n1([開始])
    n2([結束])
    n3[&amp;&#35;39;將 payload 編碼為目標請求格式&amp;&#35;39;]
    n4[target = self._task.target]
    n5[method = target.method.upper&#40;...]
    n6[headers = dict&#40;target.headers&#41;]
    n7[cookies = dict&#40;target.cookies&#41;]
    n8[location = &#40;target.parameter_lo...]
    n9[parameter = target.parameter]
    n10[request_kwargs: dict&#91;str, Any&#93; = &#123;&amp;&#35;...]
    n11{if location == &amp;&#35;39;query&amp;&#35;39;}
    n12[base_params = dict&#40;parse_qsl&#40;urlpa...]
    n13{if parameter}
    n14[base_params&#91;parameter&#93; = payload]
    n15[]
    n16[request_kwargs&#91;&amp;&#35;39;params&amp;&#35;39;&#93; ...]
    n17[url = str&#40;target.url&#41;]
    n18{if location == &amp;&#35;39;form&amp;&#35;39; and meth...}
    n19[data = dict&#40;target.form_dat...]
    n20{if parameter}
    n21[data&#91;parameter&#93; = payload]
    n22[]
    n23[request_kwargs&#91;&amp;&#35;39;data&amp;&#35;39;&#93; = ...]
    n24[url = str&#40;target.url&#41;]
    n25{if location == &amp;&#35;39;json&amp;&#35;39; and meth...}
    n26[json_payload = dict&#40;target.json_dat...]
    n27{if parameter}
    n28[json_payload&#91;parameter&#93; = payload]
    n29[]
    n30[request_kwargs&#91;&amp;&#35;39;json&amp;&#35;39;&#93; = ...]
    n31[request_kwargs.setdefault&#40;&amp;&#35;39;headers&amp;&#...]
    n32[url = str&#40;target.url&#41;]
    n33{if location == &amp;&#35;39;body&amp;&#35;39;}
    n34[body = target.body or &amp;&#35;39;&amp;&#35;39;]
    n35[request_kwargs&#91;&amp;&#35;39;content&amp;&#35;39;&#93;...]
    n36[url = str&#40;target.url&#41;]
    n37[url = self._inject_query&#40;s...]
    n38[]
    n39[]
    n40[]
    n41[]
    n42[request_kwargs = &#123;k: v for k, v in re...]
    n43[return EncodedPayload&#40;url=url, method...]
    n1 --> n3
    n3 --> n4
    n4 --> n5
    n5 --> n6
    n6 --> n7
    n7 --> n8
    n8 --> n9
    n9 --> n10
    n10 --> n11
    n11 -->|Yes| n12
    n11 -->|No| n18
    n12 --> n13
    n13 -->|Yes| n14
    n13 -->|No| n15
    n14 --> n15
    n15 --> n16
    n16 --> n17
    n17 --> n41
    n18 -->|Yes| n19
    n18 -->|No| n25
    n19 --> n20
    n20 -->|Yes| n21
    n20 -->|No| n22
    n21 --> n22
    n22 --> n23
    n23 --> n24
    n24 --> n40
    n25 -->|Yes| n26
    n25 -->|No| n33
    n26 --> n27
    n27 -->|Yes| n28
    n27 -->|No| n29
    n28 --> n29
    n29 --> n30
    n30 --> n31
    n31 --> n32
    n32 --> n39
    n33 -->|Yes| n34
    n33 -->|No| n37
    n34 --> n35
    n35 --> n36
    n36 --> n38
    n37 --> n38
    n38 --> n39
    n39 --> n40
    n40 --> n41
    n41 --> n42
    n42 --> n43
    n43 --> n2