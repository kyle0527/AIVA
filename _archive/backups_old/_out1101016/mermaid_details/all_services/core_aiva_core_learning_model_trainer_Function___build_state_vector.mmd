flowchart TB
    n1([開始])
    n2([結束])
    n3[&amp;&#35;39;構建狀態向量\n\n        Args:\n            sample:...]
    n4[state = &#91;&#93;]
    n5[attack_type = sample.context.get&#40;&amp;&#35;39;...]
    n6[state.extend&#40;self._encode_attack_type&#40;attack_type...]
    n7[progress = step_index / max&#40;len...]
    n8[state.append&#40;progress&#41;]
    n9[completed = sum&#40;&#40;1 for t in samp...]
    n10[state.append&#40;completed / max&#40;len&#40;sample.plan....]
    n11[return np.array&#40;state, dtype=np.float...]
    n1 --> n3
    n3 --> n4
    n4 --> n5
    n5 --> n6
    n6 --> n7
    n7 --> n8
    n8 --> n9
    n9 --> n10
    n10 --> n11
    n11 --> n2