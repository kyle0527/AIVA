flowchart TB
    n1([開始])
    n2([結束])
    n3[&amp;&#35;39;比較 AST 與 Trace\n\n        Args:\n           ...]
    n4[logger.info&#40;f&amp;quot;Comparing AST graph &amp;&#35;...]
    n5[expected_steps = self._extract_expect...]
    n6[actual_steps = self._extract_actual...]
    n7[&#40;completed, missing&#41; = self._calculate_comp...]
    n8[completion_rate = len&#40;completed&#41; / len...]
    n9[&#40;sequence_match_rate, out_of_order&#41; = self._calcu...]
    n10[extra_steps = self._find_extra_ste...]
    n11[&#40;success_count, failed_count&#41; = self._count_succe...]
    n12[error_count = len&#40;actual_trace.get...]
    n13[&#40;duration, avg_duration&#41; = self._calculate_timi...]
    n14[overall_score = self._calculate_over...]
    n15[metrics = ComparisonMetrics&#40;ex...]
    n16[logger.info&#40;f&amp;&#35;39;Comparison complete: comple...]
    n17[return metrics]
    n1 --> n3
    n3 --> n4
    n4 --> n5
    n5 --> n6
    n6 --> n7
    n7 --> n8
    n8 --> n9
    n9 --> n10
    n10 --> n11
    n11 --> n12
    n12 --> n13
    n13 --> n14
    n14 --> n15
    n15 --> n16
    n16 --> n17
    n17 --> n2