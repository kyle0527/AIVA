flowchart TB
    n1([開始])
    n2([結束])
    n3[&amp;&#35;39;\n        生成角色權限比較圖表\n\n        Returns:\n  ...]
    n4[df = self.matrix.to_dataf...]
    n5{if df.empty}
    n6[logger.warning&#40;&amp;&#35;39;cannot_generate_compariso...]
    n7[return go.Figure&#40;&#41;]
    n8[]
    n9[role_stats = &#123;&#125;]
    n10{for role in self.matrix.roles}
    n11[perms = self.matrix.get_role...]
    n12[role_stats&#91;role&#93; = &#123;&amp;&#35;39;total&amp;&...]
    n13[]
    n14[roles = list&#40;role_stats.keys...]
    n15[fig = go.Figure&#40;&#41;]
    n16[fig.add_trace&#40;go.Bar&#40;name=&amp;&#35;39;Allow&amp;...]
    n17[fig.add_trace&#40;go.Bar&#40;name=&amp;&#35;39;Conditiona...]
    n18[fig.add_trace&#40;go.Bar&#40;name=&amp;&#35;39;Deny&amp;&...]
    n19[fig.update_layout&#40;title=&amp;&#35;39;Role Permission ...]
    n20[logger.info&#40;&amp;&#35;39;role_comparison_chart_genera...]
    n21[return fig]
    n1 --> n3
    n3 --> n4
    n4 --> n5
    n5 -->|Yes| n6
    n5 -->|No| n8
    n6 --> n7
    n7 --> n8
    n8 --> n9
    n9 --> n10
    n10 -->|Yes| n11
    n10 -->|No| n13
    n11 --> n12
    n12 --> n10
    n13 --> n14
    n14 --> n15
    n15 --> n16
    n16 --> n17
    n17 --> n18
    n18 --> n19
    n19 --> n20
    n20 --> n21
    n21 --> n2