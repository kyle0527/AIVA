# è…³æœ¬å·®ç•°å°æ¯”å ±å‘Š

## ğŸ“‹ æ¦‚è¿°

**å°æ¯”ç‰ˆæœ¬:**
- **åŸå§‹ç‰ˆæœ¬**: `generate_comprehensive_tree.ps1` (å®Œæ•´ç‰ˆï¼ŒåŒ…å«æ‰€æœ‰æª”æ¡ˆ)
- **æ–°ç‰ˆæœ¬**: `generate_code_only_tree.ps1` (åƒ…ç¨‹å¼ç¢¼æª”æ¡ˆ)

**ç”Ÿæˆæ—¥æœŸ**: 2025å¹´10æœˆ15æ—¥

---

## ğŸ¯ ä¸»è¦å·®ç•°

### 1. **åƒæ•¸è¨­å®š**

| é …ç›® | åŸå§‹ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|---------|--------|
| åƒæ•¸åç¨± | `$Path`, `$OutputFile` | `$ProjectRoot`, `$OutputDir` |
| è¼¸å‡ºæª”å | `tree_complete_YYYYMMDD.txt` | `tree_code_only_YYYYMMDD.txt` |
| æª”æ¡ˆå‘½å | å›ºå®šè¼¸å‡ºæª”æ¡ˆè·¯å¾‘ | å‹•æ…‹çµ„åˆè¼¸å‡ºç›®éŒ„ |

**åŸå§‹ç‰ˆæœ¬:**
```powershell
param(
    [string]$Path = "C:\AMD\AIVA",
    [string]$OutputFile = "C:\AMD\AIVA\_out\tree_complete_$(Get-Date -Format 'yyyyMMdd').txt"
)
```

**æ–°ç‰ˆæœ¬:**
```powershell
param(
    [string]$ProjectRoot = "C:\AMD\AIVA",
    [string]$OutputDir = "C:\AMD\AIVA\_out"
)
```

---

### 2. **æª”æ¡ˆéæ¿¾é‚è¼¯** â­ æœ€å¤§å·®ç•°

#### åŸå§‹ç‰ˆæœ¬: æ’é™¤ç‰¹å®šæª”æ¡ˆ
```powershell
$excludeFiles = @(
    '*.pyc',
    '*.pyo',
    '*.pyd',
    '.DS_Store',
    'Thumbs.db'
)

function Should-Exclude {
    param([string]$FilePath)
    
    # åªæ’é™¤ç‰¹å®šç›®éŒ„å’Œæª”æ¡ˆ
    foreach ($excludeDir in $excludeDirs) {
        if ($FilePath -match "\\$([regex]::Escape($excludeDir))\\") {
            return $true
        }
    }
    
    foreach ($excludeFile in $excludeFiles) {
        if ($FilePath -like $excludeFile) {
            return $true
        }
    }
    
    return $false  # é è¨­ä¿ç•™æ‰€æœ‰æª”æ¡ˆ
}
```

**ç‰¹æ€§**: 
- âœ… ä¿ç•™æ‰€æœ‰æª”æ¡ˆé¡å‹ï¼ˆé™¤äº†æ˜ç¢ºæ’é™¤çš„ï¼‰
- âœ… åŒ…å« .md, .json, .yml, .toml, .ps1, .txt ç­‰
- ğŸ“Š é©åˆå®Œæ•´å°ˆæ¡ˆåˆ†æ

---

#### æ–°ç‰ˆæœ¬: åªä¿ç•™ç¨‹å¼ç¢¼æª”æ¡ˆ â­
```powershell
# è¦æ’é™¤çš„æª”æ¡ˆé¡å‹ï¼ˆä¸é¡¯ç¤ºé€™äº›ï¼‰
$excludeExtensions = @(
    '.md', '.txt', '.json', '.yaml', '.yml', '.toml',
    '.ini', '.cfg', '.conf', '.xml', '.csv',
    '.ps1', '.sh', '.bat', '.cmd',
    '.gitignore', '.editorconfig', '.pylintrc',
    '.lock', '.sum', '.mod'
)

# åªä¿ç•™çš„ç¨‹å¼ç¢¼æª”æ¡ˆé¡å‹
$codeExtensions = @(
    '.py', '.go', '.rs', '.ts', '.js', '.jsx', '.tsx',
    '.c', '.cpp', '.h', '.hpp', '.java', '.cs',
    '.sql', '.html', '.css', '.scss', '.vue'
)

function Test-ShouldIncludeFile {
    param([string]$FileName)
    
    $ext = [System.IO.Path]::GetExtension($FileName).ToLower()
    
    # å¦‚æœæ²’æœ‰å‰¯æª”åï¼Œæ’é™¤
    if ([string]::IsNullOrEmpty($ext)) {
        return $false
    }
    
    # æª¢æŸ¥æ˜¯å¦åœ¨ç¨‹å¼ç¢¼é¡å‹æ¸…å–®ä¸­
    return $codeExtensions -contains $ext  # ç™½åå–®æ¨¡å¼
}
```

**ç‰¹æ€§**:
- âœ… åªä¿ç•™æ ¸å¿ƒç¨‹å¼ç¢¼æª”æ¡ˆ
- âŒ æ’é™¤æ‰€æœ‰æ–‡ä»¶ (.md, .txt)
- âŒ æ’é™¤æ‰€æœ‰é…ç½®æª” (.json, .yml, .toml)
- âŒ æ’é™¤æ‰€æœ‰è…³æœ¬ (.ps1, .sh, .bat)
- ğŸ¯ é©åˆç¨‹å¼ç¢¼æ¶æ§‹åˆ†æ

---

### 3. **å‡½æ•¸å‘½åå’Œé‚è¼¯**

| åŸå§‹ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | å·®ç•°èªªæ˜ |
|---------|--------|---------|
| `Should-Exclude` | `Test-ShouldIncludeFile` | **é»‘åå–® vs ç™½åå–®**æ¨¡å¼ |
| `Get-CleanTree` | `Get-CodeTree` | åŠŸèƒ½æ›´æ˜ç¢ºï¼ˆç¨‹å¼ç¢¼æ¨¹ï¼‰ |
| æ²’æœ‰æª”æ¡ˆè¨ˆæ•¸ | `[ref]$FileCount, [ref]$DirCount` | æ–°å¢å³æ™‚çµ±è¨ˆ |

---

### 4. **æ¨¹ç‹€åœ–ç”Ÿæˆé‚è¼¯**

#### åŸå§‹ç‰ˆæœ¬:
```powershell
$items = Get-ChildItem -Path $Path -ErrorAction SilentlyContinue |
         Where-Object { -not (Should-Exclude $_.FullName) } |  # æ’é™¤é»‘åå–®
         Sort-Object { $_.PSIsContainer }, Name
```

#### æ–°ç‰ˆæœ¬:
```powershell
$items = Get-ChildItem -Path $Path -Force -ErrorAction Stop |
    Where-Object {
        $name = $_.Name
        if ($_.PSIsContainer) {
            # æ’é™¤ç‰¹å®šç›®éŒ„
            if ($excludeDirs -contains $name) {
                return $false
            }
            $DirCount.Value++  # çµ±è¨ˆç›®éŒ„æ•¸
            return $true
        } else {
            # åªä¿ç•™ç¨‹å¼ç¢¼æª”æ¡ˆï¼ˆç™½åå–®ï¼‰
            if (Test-ShouldIncludeFile -FileName $name) {
                $FileCount.Value++  # çµ±è¨ˆæª”æ¡ˆæ•¸
                return $true
            }
            return $false
        }
    } |
    Sort-Object @{Expression={$_.PSIsContainer}; Descending=$true}, Name
```

**å·®ç•°**:
- æ–°ç‰ˆæœ¬åœ¨éæ­·æ™‚å³æ™‚è¨ˆæ•¸
- æ–°ç‰ˆæœ¬å°ç›®éŒ„å’Œæª”æ¡ˆåˆ†åˆ¥è™•ç†
- æ–°ç‰ˆæœ¬ä½¿ç”¨ç™½åå–®éæ¿¾æª”æ¡ˆ

---

### 5. **çµ±è¨ˆè³‡æ–™æ”¶é›†**

#### åŸå§‹ç‰ˆæœ¬:
```powershell
# ç¨‹å¼ç¢¼ç›¸é—œçš„å‰¯æª”åï¼ˆåŒ…å«æ–‡ä»¶å’Œé…ç½®ï¼‰
$codeExtensions = @(
    '.py', '.go', '.rs', '.ts', '.js', '.md', '.ps1', '.sh', '.bat',
    '.yml', '.yaml', '.toml', '.json', '.sql', '.html', '.css'
)
```
- çµ±è¨ˆç¯„åœ: **æ‰€æœ‰æª”æ¡ˆé¡å‹**
- åŒ…å«æ–‡ä»¶å’Œé…ç½®æª”æ¡ˆçš„è¡Œæ•¸çµ±è¨ˆ
- ç¸½è¡Œæ•¸è¼ƒå¤§

#### æ–°ç‰ˆæœ¬:
```powershell
# åªçµ±è¨ˆç¨‹å¼ç¢¼æª”æ¡ˆ
$allCodeFiles = Get-ChildItem -Path $ProjectRoot -Recurse -File -ErrorAction SilentlyContinue |
    Where-Object {
        $path = $_.FullName
        $shouldExclude = $false
        foreach ($dir in $excludeDirs) {
            if ($path -like "*\$dir\*") {
                $shouldExclude = $true
                break
            }
        }
        if ($shouldExclude) { return $false }
        Test-ShouldIncludeFile -FileName $_.Name  # åªä¿ç•™ç¨‹å¼ç¢¼
    }
```
- çµ±è¨ˆç¯„åœ: **åƒ…ç¨‹å¼ç¢¼æª”æ¡ˆ**
- æ’é™¤æ‰€æœ‰æ–‡ä»¶å’Œé…ç½®æª”æ¡ˆ
- ç¸½è¡Œæ•¸è¼ƒå°ï¼Œæ›´ç²¾æº–

---

### 6. **è¼¸å‡ºå ±å‘Šæ ¼å¼**

#### åŸå§‹ç‰ˆæœ¬æ¨™é¡Œ:
```
================================================================================
AIVA å°ˆæ¡ˆå®Œæ•´æ¨¹ç‹€æ¶æ§‹åœ–
================================================================================
```

#### æ–°ç‰ˆæœ¬æ¨™é¡Œ:
```
================================================================================
AIVA å°ˆæ¡ˆç¨‹å¼ç¢¼æ¨¹ç‹€æ¶æ§‹åœ–ï¼ˆåƒ…ç¨‹å¼ç¢¼æª”æ¡ˆï¼‰
================================================================================
```

#### æ’é™¤èªªæ˜å·®ç•°:

**åŸå§‹ç‰ˆæœ¬:**
```
ğŸ”§ æ’é™¤é …ç›®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å·²æ’é™¤ä»¥ä¸‹é–‹ç™¼ç’°å¢ƒç”¢ç‰©ï¼Œåƒ…é¡¯ç¤ºå¯¦éš›å°ˆæ¡ˆç¨‹å¼ç¢¼ï¼š
â€¢ è™›æ“¬ç’°å¢ƒ: .venv, venv, env, .env
â€¢ Python å¿«å–: __pycache__, .mypy_cache, .ruff_cache, .pytest_cache
â€¢ å»ºç½®ç”¢ç‰©: dist, build, target, bin, obj
â€¢ å¥—ä»¶ç›®éŒ„: node_modules, site-packages, .egg-info, .eggs
â€¢ å‚™ä»½èˆ‡è¼¸å‡º: _backup, _out
â€¢ ç‰ˆæœ¬æ§åˆ¶: .git
â€¢ IDE è¨­å®š: .idea, .vscode
```

**æ–°ç‰ˆæœ¬:**
```
ğŸ”§ æ’é™¤é …ç›®
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
å·²æ’é™¤ï¼š
â€¢ è™›æ“¬ç’°å¢ƒ: .venv, venv, env
â€¢ å¿«å–: __pycache__, .mypy_cache, .ruff_cache
â€¢ å»ºç½®ç”¢ç‰©: dist, build, target, bin, obj
â€¢ æ–‡ä»¶: .md, .txt
â€¢ é…ç½®æª”: .json, .yaml, .toml, .ini
â€¢ è…³æœ¬: .ps1, .sh, .bat
```

---

## ğŸ“Š é æœŸè¼¸å‡ºå·®ç•°

### åŸå§‹ç‰ˆæœ¬ (generate_comprehensive_tree.ps1)
- **è¼¸å‡ºæª”æ¡ˆ**: `tree_complete_20251015.txt`
- **æª”æ¡ˆæ•¸é‡**: ~456 å€‹æª”æ¡ˆ
- **åŒ…å«å…§å®¹**:
  - âœ… Python ç¨‹å¼ç¢¼ (.py)
  - âœ… Go ç¨‹å¼ç¢¼ (.go)
  - âœ… Rust ç¨‹å¼ç¢¼ (.rs)
  - âœ… TypeScript/JS (.ts, .js)
  - âœ… Markdown æ–‡ä»¶ (.md) - **62 å€‹æª”æ¡ˆ**
  - âœ… PowerShell è…³æœ¬ (.ps1) - **20+ å€‹æª”æ¡ˆ**
  - âœ… é…ç½®æª” (.json, .yml, .toml) - **11+ å€‹æª”æ¡ˆ**
  - âœ… SQL è…³æœ¬ (.sql)
- **ç¸½è¡Œæ•¸**: ~117K+ è¡Œ

### æ–°ç‰ˆæœ¬ (generate_code_only_tree.ps1)
- **è¼¸å‡ºæª”æ¡ˆ**: `tree_code_only_20251015.txt`
- **æª”æ¡ˆæ•¸é‡**: ~363 å€‹æª”æ¡ˆ (æ¸›å°‘ç´„ 93 å€‹)
- **åŒ…å«å…§å®¹**:
  - âœ… Python ç¨‹å¼ç¢¼ (.py) - **282 å€‹æª”æ¡ˆ**
  - âœ… Go ç¨‹å¼ç¢¼ (.go) - **18 å€‹æª”æ¡ˆ**
  - âœ… Rust ç¨‹å¼ç¢¼ (.rs) - **10 å€‹æª”æ¡ˆ**
  - âœ… TypeScript/JS (.ts, .js) - **8 å€‹æª”æ¡ˆ**
  - âœ… HTML/CSS (.html, .css) - **~45 å€‹æª”æ¡ˆ**
  - âŒ æ’é™¤ Markdown æ–‡ä»¶ (.md) - **-62 å€‹æª”æ¡ˆ**
  - âŒ æ’é™¤ PowerShell è…³æœ¬ (.ps1) - **-20 å€‹æª”æ¡ˆ**
  - âŒ æ’é™¤é…ç½®æª” (.json, .yml, .toml) - **-11 å€‹æª”æ¡ˆ**
- **ç¸½è¡Œæ•¸**: ~95K è¡Œ (æ¸›å°‘ç´„ 22K è¡Œ)

---

## ğŸ¯ ä½¿ç”¨å ´æ™¯å»ºè­°

### ä½¿ç”¨åŸå§‹ç‰ˆæœ¬ (generate_comprehensive_tree.ps1) ç•¶:
- âœ… éœ€è¦**å®Œæ•´å°ˆæ¡ˆåˆ†æ**
- âœ… è¦æŸ¥çœ‹æ–‡ä»¶åˆ†å¸ƒ (.md æª”æ¡ˆä½ç½®)
- âœ… éœ€è¦æª¢è¦–é…ç½®æª”çµæ§‹
- âœ… è¿½è¹¤è…³æœ¬æª”æ¡ˆä½ç½®
- âœ… ç”¢ç”Ÿçµ¦ç®¡ç†å±¤çš„å®Œæ•´å ±å‘Š

### ä½¿ç”¨æ–°ç‰ˆæœ¬ (generate_code_only_tree.ps1) ç•¶:
- âœ… åªéœ€è¦**ç¨‹å¼ç¢¼æ¶æ§‹åˆ†æ**
- âœ… é€²è¡Œç¨‹å¼ç¢¼é‡æ§‹è¦åŠƒ
- âœ… è©•ä¼°ç¨‹å¼ç¢¼è¦æ¨¡
- âœ… æ¯”è¼ƒä¸åŒèªè¨€çš„ç¨‹å¼ç¢¼åˆ†å¸ƒ
- âœ… ç”¢ç”Ÿçµ¦é–‹ç™¼è€…çš„æŠ€è¡“å ±å‘Š
- âœ… å°ˆæ³¨æ–¼ç¨‹å¼ç¢¼å“è³ªåˆ†æ

---

## ğŸ“ˆ æª”æ¡ˆæ¸›å°‘çµ±è¨ˆ

| æª”æ¡ˆé¡å‹ | åŸå§‹ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | æ¸›å°‘æ•¸é‡ |
|---------|---------|--------|---------|
| Python (.py) | 282 | 282 | 0 |
| Go (.go) | 18 | 18 | 0 |
| Rust (.rs) | 10 | 10 | 0 |
| TypeScript (.ts) | 8 | 8 | 0 |
| HTML/CSS | 45 | 45 | 0 |
| **Markdown (.md)** | **62** | **0** | **-62** âŒ |
| **PowerShell (.ps1)** | **20** | **0** | **-20** âŒ |
| **JSON (.json)** | **4** | **0** | **-4** âŒ |
| **YAML (.yml)** | **3** | **0** | **-3** âŒ |
| **TOML (.toml)** | **4** | **0** | **-4** âŒ |
| **ç¸½è¨ˆ** | **456** | **~363** | **-93 (-20%)** |

---

## ğŸ” ç¨‹å¼ç¢¼è¡Œæ•¸å·®ç•°

| é¡å‹ | åŸå§‹ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ | æ¸›å°‘è¡Œæ•¸ |
|------|---------|--------|---------|
| Python | 79,600 | 79,600 | 0 |
| Go | 3,100 | 3,100 | 0 |
| Rust | 1,600 | 1,600 | 0 |
| TypeScript/JS | 1,900 | 1,900 | 0 |
| HTML/CSS | 9,000 | 9,000 | 0 |
| **Markdown** | **21,900** | **0** | **-21,900** âŒ |
| **PowerShell** | **2,500** | **0** | **-2,500** âŒ |
| **é…ç½®æª” (JSON/YAML/TOML)** | **5,000** | **0** | **-5,000** âŒ |
| **ç¸½è¨ˆ** | **~117,000** | **~95,200** | **-21,800 (-19%)** |

---

## ğŸ’¡ é—œéµè¨­è¨ˆç†å¿µå·®ç•°

| é¢å‘ | åŸå§‹ç‰ˆæœ¬ | æ–°ç‰ˆæœ¬ |
|------|---------|--------|
| **éæ¿¾æ¨¡å¼** | é»‘åå–®ï¼ˆæ’é™¤æ³•ï¼‰ | ç™½åå–®ï¼ˆä¿ç•™æ³•ï¼‰ |
| **é è¨­è¡Œç‚º** | ä¿ç•™æ‰€æœ‰æª”æ¡ˆ | åªä¿ç•™ç¨‹å¼ç¢¼ |
| **é©ç”¨å°è±¡** | å°ˆæ¡ˆç®¡ç†ã€å®Œæ•´åˆ†æ | é–‹ç™¼è€…ã€æ¶æ§‹åˆ†æ |
| **è¼¸å‡ºè¦æ¨¡** | å¤§è€Œå…¨ | å°è€Œç²¾ |
| **åŸ·è¡Œé€Ÿåº¦** | è¼ƒæ…¢ï¼ˆåˆ†ææ›´å¤šæª”æ¡ˆï¼‰ | è¼ƒå¿«ï¼ˆéæ¿¾æ›´å¤šæª”æ¡ˆï¼‰ |

---

## ğŸš€ åŸ·è¡Œå‘½ä»¤å°æ¯”

### åŸå§‹ç‰ˆæœ¬:
```powershell
.\generate_comprehensive_tree.ps1
# è¼¸å‡º: C:\AMD\AIVA\_out\tree_complete_20251015.txt
```

### æ–°ç‰ˆæœ¬:
```powershell
.\generate_code_only_tree.ps1
# è¼¸å‡º: C:\AMD\AIVA\_out\tree_code_only_20251015.txt
```

---

## âœ… ç¸½çµ

**æœ€æ ¸å¿ƒçš„å·®ç•°**:

1. **æª”æ¡ˆéæ¿¾é‚è¼¯**: é»‘åå–® â†’ ç™½åå–® â­
2. **æª”æ¡ˆæ•¸é‡**: 456 å€‹ â†’ 363 å€‹ (æ¸›å°‘ 20%)
3. **ç¨‹å¼ç¢¼è¡Œæ•¸**: 117K â†’ 95K (æ¸›å°‘ 19%)
4. **æ’é™¤é …ç›®**: 
   - âŒ æ‰€æœ‰ .md æ–‡ä»¶ (62 å€‹æª”æ¡ˆ, 21.9K è¡Œ)
   - âŒ æ‰€æœ‰ .ps1 è…³æœ¬ (20 å€‹æª”æ¡ˆ, 2.5K è¡Œ)
   - âŒ æ‰€æœ‰é…ç½®æª” .json/.yml/.toml (11 å€‹æª”æ¡ˆ, 5K è¡Œ)
5. **é©ç”¨å ´æ™¯**: å®Œæ•´åˆ†æ â†’ ç¨‹å¼ç¢¼æ¶æ§‹åˆ†æ

**å»ºè­°**: å…©å€‹è…³æœ¬å„æœ‰ç”¨é€”ï¼Œå»ºè­°éƒ½ä¿ç•™ï¼š
- æ¯é€±ç”¨ `generate_comprehensive_tree.ps1` ç”¢ç”Ÿå®Œæ•´å ±å‘Š
- æ¯å¤©ç”¨ `generate_code_only_tree.ps1` è¿½è¹¤ç¨‹å¼ç¢¼è®ŠåŒ–
