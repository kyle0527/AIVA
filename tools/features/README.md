# AIVA Features æ¨¡çµ„ - åŠŸèƒ½æª¢æ¸¬ âš¡

## ğŸ“‹ æ¨¡çµ„æ¦‚è¿°

Features æ¨¡çµ„æä¾›åŠŸèƒ½å¢å¼·å’Œå„ªåŒ–å·¥å…·ï¼Œå°ˆæ³¨æ–¼æå‡é–‹ç™¼é«”é©—å’Œåœ–è¡¨å“è³ªã€‚

## ğŸ”§ å·¥å…·æ¸…å–®

### åœ–è¡¨å„ªåŒ–å·¥å…·

#### 1. `mermaid_optimizer.py` â­
**åŠŸèƒ½**: ç¾ä»£åŒ– Mermaid.js v10+ åœ–è¡¨å„ªåŒ–å™¨
- ç¬¦åˆæœ€æ–° Mermaid.js å®˜æ–¹èªæ³•è¦ç¯„
- æ”¯æ´ç¾ä»£ä¸»é¡Œé…ç½®å’Œè‡ªå®šç¾©ä¸»é¡Œè®Šæ•¸
- æ”¯æ´ HTML æ¨™ç±¤å’Œ CSS é¡
- æä¾›å¤šç¨®ç¯€é»å½¢ç‹€å’Œé€£ç·šæ¨£å¼
- æ”¯æ´ç„¡éšœç¤™åŠŸèƒ½å’ŒéŸ¿æ‡‰å¼ä½ˆå±€

**ä¸»è¦é¡åˆ¥**:
- `MermaidTheme`: ç¾ä»£åŒ–ä¸»é¡Œé…ç½®
- `MermaidConfig`: v10+ é…ç½®é¸é …
- `MermaidOptimizer`: æ ¸å¿ƒå„ªåŒ–å™¨

**ç¯€é»å½¢ç‹€**:
- `rectangle` - æ¨™æº–çŸ©å½¢
- `rounded` - åœ“è§’çŸ©å½¢
- `stadium` - é«”è‚²å ´å½¢ (Pill)
- `circle` - åœ“å½¢
- `rhombus` - è±å½¢ (æ±ºç­–)
- `hexagon` - å…­è§’å½¢
- æ›´å¤šç¾ä»£åŒ–å½¢ç‹€...

**é€£ç·šé¡å‹**:
- `arrow` - å¯¦ç·šç®­é ­
- `dotted` - è™›ç·šç®­é ­
- `thick` - ç²—å¯¦ç·šç®­é ­
- `bidirectional` - é›™å‘ç®­é ­
- `x_arrow` - Xå‹çµ‚æ­¢
- `circle_arrow` - åœ“å‹çµ‚æ­¢

**é¡è‰²æ–¹æ¡ˆ**:
- `python`, `go`, `rust`, `typescript` - ç¨‹å¼èªè¨€ä¸»é¡Œ
- `core`, `scan`, `function`, `integration` - æ¨¡çµ„ä¸»é¡Œ
- `success`, `warning`, `danger`, `info` - ç‹€æ…‹ä¸»é¡Œ

**ä½¿ç”¨ç¯„ä¾‹**:
```python
from mermaid_optimizer import MermaidOptimizer

# å»ºç«‹å„ªåŒ–å™¨
optimizer = MermaidOptimizer()

# å‰µå»ºç¾ä»£åŒ–ç¯€é»
node = optimizer.create_node(
    "ai-core", "AI æ ¸å¿ƒ", "AI Core Engine", 
    "Bio Neuron Network", icon="ğŸ¤–"
)

# å‰µå»ºé€£ç·š
link = optimizer.create_link("api", "ai-core", "HTTP Request")

# ç”Ÿæˆå®Œæ•´åœ–è¡¨
header = optimizer.generate_header("flowchart TD")
```

### å…§å®¹è™•ç†å·¥å…·

#### 2. `remove_init_marks.py`
**åŠŸèƒ½**: ç§»é™¤ `__init__.py` æª”æ¡ˆçš„åŠŸèƒ½æ¨™è¨˜
- æ¸…ç†æ¨¹ç‹€åœ–ä¸­ä¸å¿…è¦çš„æ¨™è¨˜
- ä¿æŒåˆå§‹åŒ–æª”æ¡ˆçš„èªæ„æ­£ç¢ºæ€§
- æä¾›ç§»é™¤å‰å¾Œçš„çµ±è¨ˆè³‡è¨Š

**ä½¿ç”¨æ–¹å¼**:
```bash
python tools/features/remove_init_marks.py
```

## ğŸš€ ä½¿ç”¨å·¥ä½œæµ

### 1. Mermaid åœ–è¡¨å„ªåŒ–
```bash
# åœ¨ Python è…³æœ¬ä¸­ä½¿ç”¨
python -c "
from tools.features.mermaid_optimizer import MermaidOptimizer
optimizer = MermaidOptimizer()
print(optimizer.generate_header('flowchart TD'))
"
```

### 2. æ¨¹ç‹€åœ–æ¸…ç†
```bash
# æ¸…ç†ä¸å¿…è¦çš„æ¨™è¨˜
python tools/features/remove_init_marks.py
```

## âš™ï¸ é…ç½®èªªæ˜

### Mermaid é…ç½®é¸é …

**ä¸»é¡Œé…ç½®**:
- `theme`: `"base"`, `"forest"`, `"dark"`, `"neutral"`
- `html_labels`: æ”¯æ´ HTML æ¨™ç±¤
- `accessibility`: ç„¡éšœç¤™åŠŸèƒ½
- `responsive`: éŸ¿æ‡‰å¼ä½ˆå±€

**å®‰å…¨é…ç½®**:
- `secure`: å•Ÿç”¨å®‰å…¨æ¨¡å¼
- `sandbox_mode`: æ²™ç›’æ¨¡å¼

**æ¸²æŸ“é…ç½®**:
- `renderer`: `"svg"`, `"dagre-d3"`
- `flow_curve`: `"basis"`, `"linear"`, `"cardinal"`

### ç¾ä»£åŒ–ç‰¹æ€§

**v10+ æ–°åŠŸèƒ½**:
- CSS è‡ªå®šç¾©å±¬æ€§æ”¯æ´
- æ”¹é€²çš„ä¸»é¡Œè®Šæ•¸ç³»çµ±
- HTML æ¨™ç±¤æ”¯æ´
- æ›´å¥½çš„ç„¡éšœç¤™åŠŸèƒ½
- ç¾ä»£åŒ–å­—é«”å †ç–Š

**æœ€ä½³å¯¦è¸**:
- ä½¿ç”¨ kebab-case ç¯€é» ID
- éµå¾ª WCAG 2.1 AA é¡è‰²å°æ¯”æ¨™æº–
- ä½¿ç”¨èªæ„åŒ–çš„ CSS é¡å
- æ”¯æ´é«˜ DPI é¡¯ç¤º

## ğŸ”— èˆ‡å…¶ä»–æ¨¡çµ„çš„é—œä¿‚

- **Common**: æä¾›åŸºç¤é…ç½®å’Œæ¨£å¼è¦ç¯„
- **Core**: æ¥æ”¶æ ¸å¿ƒæ¨¡çµ„çš„åœ–è¡¨éœ€æ±‚
- **Scan**: è™•ç†æƒæçµæœçš„å¯è¦–åŒ–
- **Integration**: æ”¯æ´å¤–éƒ¨å·¥å…·çš„åœ–è¡¨ç”Ÿæˆ

## ğŸ“Š æŠ€è¡“è¦ç¯„

### Mermaid.js ç‰ˆæœ¬æ”¯æ´
- **ç›®æ¨™ç‰ˆæœ¬**: v10.0+
- **å‘å¾Œå…¼å®¹**: v9.x (éƒ¨åˆ†åŠŸèƒ½)
- **èªæ³•æ¨™æº–**: å®˜æ–¹ Mermaid.js è¦ç¯„

### é¡è‰²ç³»çµ±
- **ä¸»è‰²ç³»**: åŸºæ–¼ç¾ä»£è¨­è¨ˆç³»çµ±
- **å°æ¯”åº¦**: ç¬¦åˆ WCAG 2.1 AA æ¨™æº–
- **èª¿è‰²æ¿**: æ”¯æ´æ˜æš—ä¸»é¡Œåˆ‡æ›

### å­—é«”ç³»çµ±
```css
font-family: "Inter", "system-ui", "-apple-system", 
             "BlinkMacSystemFont", "Segoe UI", sans-serif
```

## ğŸ“ ç¶­è­·æ³¨æ„äº‹é …

1. **ç‰ˆæœ¬æ›´æ–°**: å®šæœŸæª¢æŸ¥ Mermaid.js æ–°ç‰ˆæœ¬åŠŸèƒ½
2. **èªæ³•é©—è­‰**: ç¢ºä¿ç”Ÿæˆçš„èªæ³•ç¬¦åˆå®˜æ–¹è¦ç¯„
3. **ä¸»é¡Œä¸€è‡´æ€§**: ä¿æŒèˆ‡å°ˆæ¡ˆæ•´é«”è¨­è¨ˆçš„ä¸€è‡´æ€§
4. **ç„¡éšœç¤™æ€§**: éµå¾ªç„¡éšœç¤™è¨­è¨ˆåŸå‰‡
5. **æ•ˆèƒ½å„ªåŒ–**: å„ªåŒ–å¤§å‹åœ–è¡¨çš„æ¸²æŸ“æ•ˆèƒ½

## ğŸ¨ è¨­è¨ˆåŸå‰‡

1. **ç¾ä»£åŒ–**: ä½¿ç”¨æœ€æ–°çš„ Mermaid.js åŠŸèƒ½
2. **ä¸€è‡´æ€§**: çµ±ä¸€çš„è¦–è¦ºèªè¨€å’Œæ¨£å¼è¦ç¯„
3. **å¯è®€æ€§**: æ¸…æ™°çš„å±¤æ¬¡çµæ§‹å’Œé©ç•¶çš„é–“è·
4. **å¯è¨ªå•æ€§**: æ”¯æ´è¢å¹•é–±è®€å™¨å’Œéµç›¤å°èˆª
5. **éŸ¿æ‡‰å¼**: é©æ‡‰ä¸åŒè¢å¹•å°ºå¯¸å’Œè§£æåº¦

---

*æœ€å¾Œæ›´æ–°: 2024-10-19*
*æ¨¡çµ„ç‰ˆæœ¬: Features v2.0*
*Mermaid æ”¯æ´: v10.0+*