Metadata-Version: 2.4
Name: aiva-contracts-tooling
Version: 0.1.0
Summary: CLI to export JSON Schema & TS types from aiva_schemas_plugin (Pydantic v2)
Requires-Python: >=3.9
Description-Content-Type: text/markdown

# aiva-contracts-tooling

提供從 `aiva_schemas_plugin` 自動匯出 **JSON Schema** 與 **TypeScript `.d.ts` 型別** 的 CLI。

> 需要在同一個虛擬環境可匯入 `aiva_schemas_plugin`（或以 `PYTHONPATH` 指向）。

## 使用

```bash
# 列出所有可發現的模型（BaseModel 子類）
aiva-contracts list-models

# 匯出全部模型的 JSON Schema（合併到單一檔）
aiva-contracts export-jsonschema --out ./schemas/aiva_schemas.json

# 產生 TypeScript .d.ts（由 JSON Schema 轉出）
aiva-contracts gen-ts --json ./schemas/aiva_schemas.json --out ./schemas/aiva_schemas.d.ts
```

## CI 建議

- 在 PR 對 schema 有改動時，跑 `export-jsonschema` 與 `gen-ts`；若輸出檔有差異，要求同步提交。
- 可加上最小 round-trip 測試：Python 端模型 `.model_dump_json()` ➜ 以 TS `zod`/`ajv` 驗證 JSON Schema。

