# AIVA BioNeuronRAGAgent API æœå‹™

## ç°¡ä»‹

å°‡åŸæœ¬çš„ `demo_bio_neuron_agent.py` ç¤ºç¯„ç¨‹å¼æ”¹å¯«ç‚ºå¯¦éš›çš„ RESTful API æœå‹™ï¼Œæä¾› AIVA æ ¸å¿ƒ AI ä»£ç†åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹è‰²

- **ç¨‹å¼ç¢¼åˆ†æ**: åˆ†æç¨‹å¼ç¢¼çµæ§‹ã€å‡½æ•¸ã€é¡åˆ¥ç­‰
- **æª”æ¡ˆæ“ä½œ**: è®€å–ã€å¯«å…¥ç¨‹å¼ç¢¼æª”æ¡ˆ
- **æ¼æ´æƒæ**: è§¸ç™¼å®‰å…¨æƒæä½œæ¥­
- **ç³»çµ±å‘½ä»¤**: åŸ·è¡Œç³»çµ±å‘½ä»¤ä¸¦å–å¾—çµæœ
- **çŸ¥è­˜åº«æŸ¥è©¢**: æª¢ç´¢ç¨‹å¼ç¢¼çŸ¥è­˜åº«
- **åŸ·è¡Œæ­·å²**: è¿½è¹¤ AI ä»£ç†çš„æ“ä½œè¨˜éŒ„

## å¿«é€Ÿé–‹å§‹

### 1. å®‰è£ä¾è³´
```bash
# ç¢ºä¿æ‰€æœ‰ä¾è³´å·²å®‰è£ (FastAPI, uvicorn ç­‰)
pip install -r requirements.txt
```

### 2. å•Ÿå‹•æœå‹™
```bash
# æ–¹æ³• 1: ç›´æ¥åŸ·è¡Œ
python examples/demo_bio_neuron_agent.py

# æ–¹æ³• 2: ä½¿ç”¨ uvicorn
uvicorn examples.demo_bio_neuron_agent:app --reload --host 127.0.0.1 --port 8000
```

### 3. æŸ¥çœ‹ API æ–‡ä»¶
å•Ÿå‹•å¾Œï¼Œå¯åœ¨ä»¥ä¸‹ä½ç½®æŸ¥çœ‹ API æ–‡ä»¶ï¼š
- **Swagger UI**: http://127.0.0.1:8000/docs
- **ReDoc**: http://127.0.0.1:8000/redoc

## API ç«¯é»

### åŸºæœ¬ç«¯é»

- `GET /` - æœå‹™ç‹€æ…‹æª¢æŸ¥
- `GET /health` - å¥åº·æª¢æŸ¥
- `GET /stats` - çŸ¥è­˜åº«çµ±è¨ˆè³‡è¨Š
- `GET /history` - åŸ·è¡Œæ­·å²

### æ ¸å¿ƒç«¯é»

- `POST /invoke` - å‘¼å« AI ä»£ç†åŸ·è¡Œä»»å‹™

## ä½¿ç”¨ç¯„ä¾‹

### 1. ç¨‹å¼ç¢¼åˆ†æ
```bash
curl -X POST "http://127.0.0.1:8000/invoke" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "åˆ†ææ ¸å¿ƒæ¨¡çµ„çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹",
    "path": "services/core/aiva_core/app.py"
  }'
```

### 2. æ¼æ´æƒæ
```bash
curl -X POST "http://127.0.0.1:8000/invoke" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "å°ç›®æ¨™ç¶²ç«™åŸ·è¡Œå®Œæ•´çš„å®‰å…¨æƒæ",
    "target_url": "https://example.com",
    "scan_type": "full"
  }'
```

### 3. ç³»çµ±å‘½ä»¤åŸ·è¡Œ
```bash
curl -X POST "http://127.0.0.1:8000/invoke" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "æª¢æŸ¥ Python ç‰ˆæœ¬",
    "command": "python --version"
  }'
```

### 4. æª”æ¡ˆè®€å–
```bash
curl -X POST "http://127.0.0.1:8000/invoke" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "è®€å–æƒæå™¨çš„ä¸»è¦å…¥å£æª”æ¡ˆ",
    "path": "services/scan/aiva_scan/worker.py"
  }'
```

### 5. ç¨‹å¼ç¢¼å¯«å…¥
```bash
curl -X POST "http://127.0.0.1:8000/invoke" \
  -H "Content-Type: application/json" \
  -d '{
    "query": "å»ºç«‹ä¸€å€‹ç°¡å–®çš„æ¸¬è©¦ Python æª”æ¡ˆ",
    "path": "test_api_generated.py",
    "content": "def hello():\n    print(\"Hello from API!\")\n\nif __name__ == \"__main__\":\n    hello()"
  }'
```

## å›æ‡‰æ ¼å¼

### æˆåŠŸå›æ‡‰ç¯„ä¾‹
```json
{
  "status": "success",
  "tool_used": "code_analyzer",
  "confidence": 0.95,
  "tool_result": {
    "status": "success",
    "total_lines": 150,
    "functions": 8,
    "classes": 3
  }
}
```

### éŒ¯èª¤å›æ‡‰ç¯„ä¾‹
```json
{
  "status": "error",
  "message": "æª”æ¡ˆä¸å­˜åœ¨æˆ–ç„¡æ³•è®€å–",
  "confidence": 0.0
}
```

## åƒæ•¸èªªæ˜

### InvokeRequest åƒæ•¸

| åƒæ•¸ | é¡å‹ | å¿…å¡« | èªªæ˜ |
|------|------|------|------|
| `query` | string | âœ… | è¦åŸ·è¡Œçš„æŸ¥è©¢æˆ–æŒ‡ä»¤ |
| `path` | string | âŒ | æª”æ¡ˆè·¯å¾‘ (ç”¨æ–¼ç¨‹å¼ç¢¼è®€å–/å¯«å…¥/åˆ†æ) |
| `target_url` | string | âŒ | ç›®æ¨™ URL (ç”¨æ–¼æƒæ) |
| `scan_type` | string | âŒ | æƒæé¡å‹ (å¦‚: full, quick) |
| `command` | string | âŒ | ç³»çµ±å‘½ä»¤ (ç”¨æ–¼å‘½ä»¤åŸ·è¡Œ) |
| `content` | string | âŒ | æª”æ¡ˆå…§å®¹ (ç”¨æ–¼æª”æ¡ˆå¯«å…¥) |

## æ³¨æ„äº‹é …

1. **åˆå§‹åŒ–æ™‚é–“**: é¦–æ¬¡å•Ÿå‹•æ™‚ BioNeuronRAGAgent éœ€è¦ç´¢å¼•æ•´å€‹ç¨‹å¼ç¢¼åº«ï¼Œå¯èƒ½éœ€è¦å¹¾åˆ†é˜
2. **è·¯å¾‘è¨­å®š**: ç¢ºä¿ç¨‹å¼ç¢¼åº«è·¯å¾‘ (`codebase_path`) è¨­å®šæ­£ç¢º
3. **æ¬Šé™ç®¡ç†**: æª”æ¡ˆå¯«å…¥å’Œå‘½ä»¤åŸ·è¡ŒåŠŸèƒ½éœ€è¦é©ç•¶çš„ç³»çµ±æ¬Šé™
4. **å®‰å…¨è€ƒé‡**: åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­æ‡‰è©²åŠ å…¥é©ç•¶çš„é©—è­‰å’Œæˆæ¬Šæ©Ÿåˆ¶

## é€²éšåŠŸèƒ½

### çŸ¥è­˜åº«çµ±è¨ˆ
```bash
curl "http://127.0.0.1:8000/stats"
```

### åŸ·è¡Œæ­·å²
```bash
curl "http://127.0.0.1:8000/history"
```

### å¥åº·æª¢æŸ¥
```bash
curl "http://127.0.0.1:8000/health"
```

## ç–‘é›£æ’è§£

### å¸¸è¦‹å•é¡Œ

1. **æœå‹™å•Ÿå‹•å¤±æ•—**: æª¢æŸ¥ä¾è³´æ˜¯å¦å·²å®‰è£ (`pip install -r requirements.txt`)
2. **ä»£ç†åˆå§‹åŒ–å¤±æ•—**: æª¢æŸ¥ç¨‹å¼ç¢¼åº«è·¯å¾‘æ˜¯å¦æ­£ç¢º
3. **å·¥å…·åŸ·è¡Œå¤±æ•—**: æª¢æŸ¥ç³»çµ±æ¬Šé™å’Œç’°å¢ƒè¨­å®š

### æ—¥èªŒæŸ¥çœ‹
æœå‹™æœƒè¼¸å‡ºè©³ç´°çš„æ—¥èªŒè³‡è¨Šï¼ŒåŒ…æ‹¬ï¼š
- ğŸš€ æœå‹™å•Ÿå‹•ç‹€æ…‹
- ğŸ” è«‹æ±‚è™•ç†éç¨‹
- âœ… åŸ·è¡ŒæˆåŠŸçµæœ
- âŒ éŒ¯èª¤è¨Šæ¯å’Œå †ç–Šè¿½è¹¤

## é–‹ç™¼å»ºè­°

1. ä½¿ç”¨ `--reload` åƒæ•¸å•Ÿå‹•æœå‹™ä»¥æ”¯æ´ç†±é‡è¼‰
2. æª¢æŸ¥ Swagger UI æ–‡ä»¶äº†è§£å®Œæ•´çš„ API è¦æ ¼
3. ä½¿ç”¨å¥åº·æª¢æŸ¥ç«¯é»ç›£æ§æœå‹™ç‹€æ…‹
4. å®šæœŸæŸ¥çœ‹åŸ·è¡Œæ­·å²äº†è§£ AI ä»£ç†çš„è¡Œç‚ºæ¨¡å¼