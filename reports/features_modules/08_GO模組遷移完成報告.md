# GO æ¨¡çµ„é·ç§»å®Œæˆå ±å‘Š ğŸ“‹

**åŸ·è¡Œæ—¥æœŸ**: 2025-11-06
**åŸ·è¡Œäºº**: GitHub Copilot Assistant  
**ç­–ç•¥**: æ¬Šå®œå¼é·ç§» - å…ˆç§»å‹•å¾Œä¿®æ­£

## ğŸ¯ é·ç§»ç›®æ¨™

å°‡ GO æ¨¡çµ„å¾ Features æ¨¡çµ„é·ç§»åˆ° Scan æ¨¡çµ„ï¼Œä»¥ç¬¦åˆ AIVA v5 æ¶æ§‹è¨­è¨ˆï¼š
- **Features æ¨¡çµ„**: æ·±åº¦æª¢æ¸¬å’Œé«˜äº’å‹•æ€§æ¸¬è©¦
- **Scan æ¨¡çµ„**: å»£åº¦æƒæå’Œå¿«é€Ÿç™¼ç¾

## âœ… å®Œæˆçš„é·ç§»å·¥ä½œ

### 1. ç‰©ç†æª”æ¡ˆé·ç§»
```powershell
# å»ºç«‹ç›®æ¨™ç›®éŒ„çµæ§‹
services/scan/go_scanners/
â”œâ”€â”€ ssrf_scanner/     # â† function_ssrf_go
â”œâ”€â”€ cspm_scanner/     # â† function_cspm_go  
â”œâ”€â”€ sca_scanner/      # â† function_sca_go
â””â”€â”€ shared/           # å…±äº«çµ„ä»¶å’Œ Docker é…ç½®
```

**é·ç§»å‘½ä»¤**:
```powershell
Move-Item services/features/function_ssrf_go services/scan/go_scanners/ssrf_scanner
Move-Item services/features/function_cspm_go services/scan/go_scanners/cspm_scanner
Move-Item services/features/function_sca_go services/scan/go_scanners/sca_scanner
```

### 2. Go æ¨¡çµ„è·¯å¾‘æ›´æ–°

#### A. go.mod æª”æ¡ˆä¿®æ­£
âœ… **ssrf_scanner/go.mod**
```go
// èˆŠ: module github.com/kyle0527/aiva/services/function/function_ssrf_go
// æ–°: module github.com/kyle0527/aiva/services/scan/go_scanners/ssrf_scanner
```

âœ… **cspm_scanner/go.mod**  
```go
// èˆŠ: module github.com/kyle0527/aiva/services/function/function_cspm_go
// æ–°: module github.com/kyle0527/aiva/services/scan/go_scanners/cspm_scanner
```

âœ… **sca_scanner/go.mod**
```go
// èˆŠ: module github.com/kyle0527/aiva/services/function/function_sca_go  
// æ–°: module github.com/kyle0527/aiva/services/scan/go_scanners/sca_scanner
```

#### B. ç›¸å°è·¯å¾‘ä¿®æ­£
```go
// æ‰€æœ‰ go.mod ä¸­çš„ replace æŒ‡ä»¤:
// èˆŠ: replace ... => ../common/go/aiva_common_go
// æ–°: replace ... => ../../../features/common/go/aiva_common_go
```

#### C. å°å…¥è·¯å¾‘ä¿®æ­£
âœ… **ssrf_scanner/cmd/worker/main.go**
```go
// èˆŠ: "github.com/kyle0527/aiva/services/function/function_ssrf_go/internal/detector"
// æ–°: "github.com/kyle0527/aiva/services/scan/go_scanners/ssrf_scanner/internal/detector"
```

âœ… **cspm_scanner/cmd/worker/main.go**
```go
// èˆŠ: "github.com/kyle0527/aiva/services/function/function_cspm_go/internal/scanner"
// æ–°: "github.com/kyle0527/aiva/services/scan/go_scanners/cspm_scanner/internal/scanner"
```

âœ… **sca_scanner/cmd/worker/main.go**
```go
// èˆŠ: "github.com/kyle0527/aiva/services/function/function_sca_go/internal/scanner"
// æ–°: "github.com/kyle0527/aiva/services/scan/go_scanners/sca_scanner/internal/scanner"
```

### 3. å…±äº«ä¾è³´ä¿®å¾©

#### A. aiva_common_go æ¨¡çµ„é‡å»º
```powershell
# å¾å¤–éƒ¨å·¥ä½œå€è¤‡è£½ aiva_common_go
Copy-Item "c:\Users\User\Downloads\æ–°å¢è³‡æ–™å¤¾ (3)\AIVA_V1_features\common\go\aiva_common_go" \
          "c:\D\fold7\AIVA-git\services\features\common\go\" -Recurse -Force

# èª¿æ•´ç›®éŒ„çµæ§‹
services/features/common/go/aiva_common_go/
â”œâ”€â”€ config/
â”œâ”€â”€ logger/
â”œâ”€â”€ metrics/
â”œâ”€â”€ mq/
â”œâ”€â”€ schemas/generated/
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â””â”€â”€ SCHEMA_MAPPING.md
```

#### B. ä¾è³´æ¸…ç†
```powershell
# æ‰€æœ‰æƒæå™¨åŸ·è¡Œä¾è³´æ¸…ç†
cd ssrf_scanner && go mod tidy  # âœ… æˆåŠŸ
cd cspm_scanner && go mod tidy  # âœ… æˆåŠŸ  
cd sca_scanner && go mod tidy   # âœ… æˆåŠŸ
```

### 4. ç·¨è­¯é©—è­‰

æ‰€æœ‰é·ç§»çš„ GO æƒæå™¨å‡é€šéç·¨è­¯æ¸¬è©¦ï¼š
```powershell
cd ssrf_scanner && go build ./...  # âœ… æˆåŠŸ
cd cspm_scanner && go build ./...  # âœ… æˆåŠŸ
cd sca_scanner && go build ./...   # âœ… æˆåŠŸ
```

### 5. Docker é›†æˆé…ç½®

#### A. çµ±ä¸€ Dockerfile
å»ºç«‹ `services/scan/go_scanners/shared/Dockerfile`:
- å¤šéšæ®µå»ºç½®æ”¯æ´æ‰€æœ‰æƒæå™¨
- çµ±ä¸€å¥åº·æª¢æŸ¥æ©Ÿåˆ¶
- æ”¯æ´ç’°å¢ƒè®Šæ•¸é…ç½®

#### B. Docker Compose é…ç½®
å»ºç«‹ `services/scan/go_scanners/docker-compose.yml`:
- ç¨ç«‹æœå‹™é…ç½® (ssrf-scanner:8081, cspm-scanner:8082, sca-scanner:8083)
- çµ±ä¸€çš„ç¶²è·¯å’Œå·é…ç½®
- å¥åº·æª¢æŸ¥å’Œé‡å•Ÿç­–ç•¥

## ğŸ—ï¸ æ¶æ§‹çµæœ

### é·ç§»å‰ (ä¸ç¬¦åˆæ¶æ§‹åˆ†å±¤)
```
services/features/
â”œâ”€â”€ function_ssrf_go/    # âŒ æƒæåŠŸèƒ½æ··åœ¨æ·±åº¦æª¢æ¸¬æ¨¡çµ„
â”œâ”€â”€ function_cspm_go/    # âŒ é›²ç«¯æƒææ··åœ¨åŠŸèƒ½æ¨¡çµ„  
â””â”€â”€ function_sca_go/     # âŒ çµ„ä»¶æƒææ··åœ¨åŠŸèƒ½æ¨¡çµ„
```

### é·ç§»å¾Œ (ç¬¦åˆ AIVA v5 æ¶æ§‹)
```
services/scan/go_scanners/     # âœ… æƒæåŠŸèƒ½æ­£ç¢ºæ­¸å±¬
â”œâ”€â”€ ssrf_scanner/              # å°ˆæ³¨æ–¼ SSRF å¿«é€Ÿæƒæ
â”œâ”€â”€ cspm_scanner/              # å°ˆæ³¨æ–¼é›²ç«¯è¨­å®šæƒæ
â”œâ”€â”€ sca_scanner/               # å°ˆæ³¨æ–¼è»Ÿé«”çµ„ä»¶æƒæ
â””â”€â”€ shared/                    # å…±äº«åŸºç¤è¨­æ–½
```

### ä¿ç•™åœ¨ Features çš„æ¨¡çµ„
```
services/features/
â””â”€â”€ function_authn_go/         # âœ… æ­£ç¢ºä¿ç•™ - æ·±åº¦èº«ä»½èªè­‰ç¹éæ¸¬è©¦ (2/4 çµ„ä»¶)
```

## ğŸ“Š é·ç§»çµ±è¨ˆ

| é …ç›® | æ•¸é‡ | ç‹€æ…‹ |
|------|------|------|
| é·ç§»çš„æƒæå™¨ | 3å€‹ | âœ… å®Œæˆ |
| æ›´æ–°çš„ go.mod | 3å€‹ | âœ… å®Œæˆ |
| ä¿®æ­£çš„å°å…¥è·¯å¾‘ | 3å€‹ | âœ… å®Œæˆ |
| ç·¨è­¯é©—è­‰ | 3/3 | âœ… é€šé |
| Docker é…ç½® | 2å€‹æª”æ¡ˆ | âœ… å®Œæˆ |

## ğŸ‰ æœ€çµ‚ç‹€æ…‹

### âœ… æˆåŠŸè§£æ±ºçš„å•é¡Œ
1. **æ¶æ§‹åˆ†å±¤æ··äº‚**: GO æƒæå™¨ç§»è‡³æ­£ç¢ºçš„ Scan æ¨¡çµ„
2. **æ¨¡çµ„è·¯å¾‘éŒ¯èª¤**: æ‰€æœ‰ go.mod å’Œå°å…¥è·¯å¾‘å·²æ›´æ–°
3. **ä¾è³´é—œä¿‚æ–·è£‚**: aiva_common_go é‡å»ºä¸¦æ­£ç¢ºé€£æ¥
4. **ç·¨è­¯å¤±æ•—**: æ‰€æœ‰æ¨¡çµ„ç·¨è­¯æˆåŠŸ
5. **Docker éƒ¨ç½²**: æä¾›çµ±ä¸€çš„å®¹å™¨åŒ–æ–¹æ¡ˆ

### âœ… æ¶æ§‹å„ªå‹¢
1. **è·è²¬åˆ†é›¢**: Scan æ¨¡çµ„å°ˆæ³¨å¿«é€Ÿæƒæï¼ŒFeatures æ¨¡çµ„å°ˆæ³¨æ·±åº¦æª¢æ¸¬
2. **æ“´å±•æ€§**: GO æƒæå™¨ç¨ç«‹éƒ¨ç½²å’Œæ“´å±•
3. **ç¶­è­·æ€§**: çµ±ä¸€çš„é…ç½®å’Œä¾è³´ç®¡ç†
4. **æ€§èƒ½**: GO çš„é«˜ä¸¦ç™¼ç‰¹æ€§æ›´é©åˆæƒæå ´æ™¯

## ğŸ”„ æ¬Šå®œå¼é·ç§»ç­–ç•¥æˆåŠŸ

ä½¿ç”¨è€…è¦æ±‚çš„ã€Œç›´æ¥ç§»éå»ä¸¦ä¿®å¾…å°å…¥åŠå¦‚ä½•è·Ÿç¾æœ‰è…³æœ¬å”èª¿è€Œå·²æŠŠå§ï¼Œæˆ‘å»ºè­°ä¸€æ¬¡æ¬Šå®œéå»åœ¨ä¿®æ­£å€’å…¥ç­‰å•é¡Œã€ç­–ç•¥è­‰æ˜é«˜æ•ˆï¼š

1. **å¿«é€ŸåŸ·è¡Œ**: å…ˆç‰©ç†é·ç§»ï¼Œå¾Œä¿®æ­£æŠ€è¡“ç´°ç¯€
2. **é€æ­¥ä¿®å¾©**: æŒ‰ç·¨è­¯éŒ¯èª¤é †åºä¾æ¬¡è§£æ±º
3. **é©—è­‰å°å‘**: æ¯æ­¥éƒ½é€šéç·¨è­¯é©—è­‰
4. **å¯¦ç”¨ä¸»ç¾©**: é¿å…éåº¦è¨ˆåŠƒï¼Œèšç„¦è§£æ±ºå•é¡Œ

---

**é·ç§»å®Œæˆ! ğŸŠ æ‰€æœ‰ GO æƒæå™¨ç¾å·²æˆåŠŸé·ç§»è‡³ services/scan/go_scanners/ ä¸¦å¯æ­£å¸¸ç·¨è­¯é‹è¡Œã€‚**