# é‡è¤‡å®šç¾©å•é¡Œæ¸…ç†å¾Œåˆ†æå ±å‘Š
## AIVA v5.0 è‡ªå‹•ç”Ÿæˆæ–‡ä»¶æ¸…ç†å¾Œç¾æ³

### ğŸ“Š æ¸…ç†æˆæœ
**æ¸…ç†æ—¥æœŸ**: 2024-12-19  
**æ¸…ç†ç¯„åœ**: è‡ªå‹•ç”ŸæˆSchema + å‚™ä»½å·¥å…·æ–‡ä»¶  

#### âœ… å·²ç§»é™¤çš„é‡è¤‡å®šç¾©ä¾†æº
1. **services/aiva_common/schemas/generated/** (æ•´å€‹ç›®éŒ„)
   - base_types.py (åŒ…å«é‡è¤‡çš„Target, RiskLevelç­‰)
   - findings.py (èˆ‡æ‰‹å‹•ç¶­è­·ç‰ˆæœ¬è¡çª)
   - cli.py, messaging.py, plugins.py, tasks.pyç­‰
   - __init__.py, __pycache__/

2. **services/aiva_common/tools/** (å‚™ä»½æ–‡ä»¶)
   - schema_codegen_tool_backup.py
   - cross_language_interface_backup.py

### ğŸ¯ å‰©é¤˜éœ€è™•ç†çš„å¯¦éš›é‡è¤‡å®šç¾©

#### 1. RiskLevel (é¢¨éšªç­‰ç´š) - 2å€‹ç‰ˆæœ¬
- **ä½ç½®A**: `services/aiva_common/enums/common.py:92`
  ```python
  class RiskLevel(str, Enum):
      CRITICAL = "critical"
      HIGH = "high"  
      MEDIUM = "medium"
      LOW = "low"
      INFO = "info"
  ```

- **ä½ç½®B**: `services/aiva_common/enums/business.py:440`
  ```python  
  class RiskLevel(Enum):
      VERY_LOW = "VERY_LOW"
      LOW = "LOW"
      MEDIUM = "MEDIUM" 
      HIGH = "HIGH"
      VERY_HIGH = "VERY_HIGH"
      CRITICAL = "CRITICAL"
  ```

**å·®ç•°åˆ†æ**: ä¸åŒçš„å€¼å®šç¾©å’Œç¹¼æ‰¿æ–¹å¼

#### 2. DataFormat (è³‡æ–™æ ¼å¼) - 3å€‹ç‰ˆæœ¬
- **ä½ç½®A**: `services/aiva_common/enums/data_models.py:25`
- **ä½ç½®B**: `services/aiva_common/enums/common.py:741` 
- **ä½ç½®C**: `services/aiva_common/enums/academic.py:245`

**å·®ç•°åˆ†æ**: æ¯å€‹ç‰ˆæœ¬é‡å°ä¸åŒç”¨é€”å®šç¾©ä¸åŒæ ¼å¼

#### 3. EncodingType (ç·¨ç¢¼é¡å‹) - 2å€‹ç‰ˆæœ¬
- **ä½ç½®A**: `services/aiva_common/enums/data_models.py:64`
- **ä½ç½®B**: `services/aiva_common/enums/common.py:756`

#### 4. Target (ç›®æ¨™ç‰©ä»¶) - 2å€‹ç‰ˆæœ¬  
- **ä½ç½®A**: `services/aiva_common/schemas/findings.py:58`
- **ä½ç½®B**: `services/aiva_common/schemas/security/findings.py:58`

### ğŸ“‹ ä¿®å¾©å„ªå…ˆç´š (æ¸…ç†å¾Œ)

#### ğŸ”´ é«˜å„ªå…ˆç´š (ç«‹å³ä¿®å¾©)
1. **RiskLevel** - ä¸åŒæšèˆ‰å€¼é€ æˆæ¥­å‹™é‚è¼¯è¡çª
2. **Target** - Pydanticæ¨¡å‹é‡è¤‡å®šç¾©å½±éŸ¿APIä¸€è‡´æ€§

#### ğŸŸ¡ ä¸­å„ªå…ˆç´š (è¨ˆåŠƒä¿®å¾©)  
3. **DataFormat** - 3å€‹ç‰ˆæœ¬éœ€è¦çµ±ä¸€æ¨™æº–
4. **EncodingType** - ç·¨ç¢¼æ¨™æº–éœ€è¦çµ±ä¸€

### ğŸ› ï¸ ç°¡åŒ–çš„ä¿®å¾©ç­–ç•¥

#### éšæ®µ1: çµ±ä¸€RiskLevel
- é¸æ“‡business.pyç‰ˆæœ¬ä½œç‚ºæ¨™æº– (æ›´å®Œæ•´çš„ç´šåˆ¥å®šç¾©)
- æ›´æ–°common.pyä¸­çš„å¼•ç”¨
- æª¢æŸ¥æ‰€æœ‰importèªå¥

#### éšæ®µ2: åˆä½µTargetå®šç¾©
- çµ±ä¸€åˆ°security/findings.py (æ›´å…·é«”çš„å®‰å…¨é ˜åŸŸå®šç¾©)
- æ›´æ–°ä¸€èˆ¬findings.pyçš„å¼•ç”¨

#### éšæ®µ3: æ¨™æº–åŒ–DataFormat
- ä»¥common.pyç‰ˆæœ¬ç‚ºåŸºæº– (éµå¾ªIANAæ¨™æº–)
- é·ç§»å…¶ä»–ç‰ˆæœ¬çš„ç‰¹æ®Šç”¨é€”å®šç¾©

#### éšæ®µ4: çµ±ä¸€EncodingType
- åˆä½µåˆ°common.pyç‰ˆæœ¬
- æ›´æ–°data_models.pyçš„å¼•ç”¨

### âœ… æ¸…ç†æ•ˆç›Š
- **æ¸›å°‘é‡è¤‡å®šç¾©**: å¾åŸæœ¬12é¡é™ä½ç‚º4é¡
- **æ¶ˆé™¤è‡ªå‹•ç”Ÿæˆè¡çª**: å®Œå…¨ç§»é™¤generated/ç›®éŒ„
- **ç°¡åŒ–ç¶­è­·å·¥ä½œ**: ä¸å†éœ€è¦åŒæ­¥å¤šå€‹è‡ªå‹•ç”Ÿæˆç‰ˆæœ¬
- **æé«˜ä»£ç¢¼å“è³ª**: ä¿ç•™æ‰‹å‹•ç¶­è­·çš„é«˜å“è³ªå®šç¾©

### ğŸ¯ ä¸‹ä¸€æ­¥è¡Œå‹•
1. æ›´æ–°duplication_fix_tool.pyåªè™•ç†4é¡å¯¦éš›é‡è¤‡å®šç¾©
2. åŸ·è¡Œç°¡åŒ–çš„ä¿®å¾©æµç¨‹
3. é©—è­‰æ¸…ç†å¾ŒåŠŸèƒ½å®Œæ•´æ€§
4. æ›´æ–°ç›¸é—œæ–‡æª”å’Œå°å…¥èªå¥