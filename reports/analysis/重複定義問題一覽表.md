# AIVA é‡è¤‡å®šç¾©å•é¡Œåˆ†æèˆ‡ä¿®å¾©åŸ·è¡Œå ±å‘Š

---
**Created**: 2025-11-03  
**Last Modified**: 2025-11-03  
**Document Type**: Analysis Report  
**Status**: Execution Ready  
---

[![å•é¡Œç¸½æ•¸](https://img.shields.io/badge/é‡è¤‡å®šç¾©å•é¡Œ-12é¡-orange.svg)]()
[![ä¿®å¾©å„ªå…ˆç´š](https://img.shields.io/badge/é«˜å„ªå…ˆç´š-5é …-red.svg)]()
[![Schemaçµ±ä¸€](https://img.shields.io/badge/Schemaçµ±ä¸€-100%ç›®æ¨™-green.svg)]()

> **ğŸ¯ å ±å‘Šç›®æ¨™**: åŸºæ–¼ AIVA v5.0 è·¨èªè¨€çµ±ä¸€æ¶æ§‹ï¼Œç³»çµ±æ€§è­˜åˆ¥å’Œä¿®å¾©æ‰€æœ‰é‡è¤‡å®šç¾©å•é¡Œ  
> **ğŸ“‹ è³‡æ–™ä¾†æº**: Word æ–‡æª”åˆ†æ (pandoc è½‰æ›) + æ¶æ§‹å¯©æŸ¥  
> **âš¡ åŸ·è¡Œç‹€æ…‹**: ç¬¦åˆ AIVA Common é–‹ç™¼è¦ç¯„ï¼Œéµå¾ªå–®ä¸€ä¾†æºåŸå‰‡ (SOT)  
> **ğŸ”§ ä¿®å¾©æ¨™æº–**: éµå¾ª [aiva_common é–‹ç™¼æŒ‡å—](../services/aiva_common/README.md#ğŸ”§-é–‹ç™¼æŒ‡å—)

---

## ğŸ“Š åŸ·è¡Œæ‘˜è¦

### ğŸ¯ **é‡è¤‡å®šç¾©å•é¡Œçµ±è¨ˆ**
- **ç¸½è¨ˆ**: 12 é¡é‡è¤‡å®šç¾©å•é¡Œ
- **è³‡æ–™æ¨¡å‹**: 6 å€‹é‡è¤‡å®šç¾© (Target, ScanScope, APIResponse, Finding, Asset, Fingerprints, Authentication/RateLimit)
- **æšèˆ‰é¡å‹**: 3 å€‹é‡è¤‡å®šç¾© (RiskLevel, DataFormat, EncodingType)  
- **è·¨èªè¨€åˆç´„**: 1 å€‹ç³»çµ±æ€§å•é¡Œ
- **åŠŸèƒ½æ¨¡çµ„**: 1 å€‹é‡è¤‡å¯¦ç¾
- **æšèˆ‰åˆ¥å**: 1 å€‹å‘å¾Œç›¸å®¹å•é¡Œ

### ğŸ“ˆ **ä¿®å¾©å½±éŸ¿ç¯„åœ**
- **å½±éŸ¿æª”æ¡ˆ**: é ä¼° 20+ å€‹æ ¸å¿ƒæª”æ¡ˆ
- **ä¿®å¾©æ™‚ç¨‹**: åˆ† 4 å€‹éšæ®µåŸ·è¡Œ
- **ç›¸å®¹æ€§**: 100% å‘å¾Œç›¸å®¹
- **Schema çµ±ä¸€**: æ”¯æ´ AIVA v5.0 è·¨èªè¨€æ¶æ§‹

## ğŸ” é‡è¤‡å®šç¾©å•é¡Œè©³ç´°åˆ†æ

### ğŸ“‹ **å•é¡Œåˆ†é¡çŸ©é™£**

| **å•é¡Œé¡å‹** | **æ•¸é‡** | **å½±éŸ¿ç­‰ç´š** | **ä¿®å¾©è¤‡é›œåº¦** | **Schema ç›¸é—œ** |
|-------------|----------|-------------|---------------|----------------|
| ğŸ“Š **è³‡æ–™æ¨¡å‹é‡è¤‡** | 6é … | ğŸ”´ é«˜ | âš™ï¸ ä¸­ç­‰ | âœ… æ˜¯ |
| ğŸ·ï¸ **æšèˆ‰é‡è¤‡å®šç¾©** | 3é … | ğŸ”´ é«˜ | ğŸŸ¢ ç°¡å–® | âœ… æ˜¯ |
| ğŸŒ **è·¨èªè¨€åˆç´„** | 1é … | ğŸŸ¡ ä¸­ | âš™ï¸ ä¸­ç­‰ | âœ… æ˜¯ |
| ğŸ”§ **åŠŸèƒ½æ¨¡çµ„é‡è¤‡** | 1é … | ğŸŸ¢ ä½ | ğŸŸ¢ ç°¡å–® | âŒ å¦ |
| ğŸ”– **æšèˆ‰åˆ¥åå•é¡Œ** | 1é … | ğŸŸ¢ ä½ | ğŸŸ¢ ç°¡å–® | âŒ å¦ |

### ğŸ“Š **é‡è¤‡å®šç¾©å•é¡Œæ¸…å–®**

| **é¡å‹** | **é‡è¤‡é …ç›®** | **æª”æ¡ˆä½ç½®** | **å•é¡Œèªªæ˜** | **ä¿®å¾©ç­–ç•¥** |
|----------|-------------|-------------|-------------|-------------|
| **é¡åˆ¥** | `Target` æ¨¡å‹ | *services/scan/schemas.py*[[1]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/schemas.py#L16-L24)ï¼›*services/aiva_common/schemas/findings.py*[[2]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/findings.py#L58-L65) | **é‡è¤‡å®šç¾©**ï¼š`Target` ç›®æ¨™è³‡è¨Šé¡åˆ¥åœ¨æƒææ¨¡çµ„ä¸­èˆŠæœ‰å®šç¾©ä¸€æ¬¡ï¼Œä¸”åœ¨çµ±ä¸€çš„ `aiva_common.schemas` ä¸­åˆå®šç¾©ä¸€æ¬¡ã€‚æƒææ¨¡çµ„å…§çš„ `Target` ç°¡åŒ–ä¸”å·²æ¨™è¨˜ç‚ºæ£„ç”¨[[1]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/schemas.py#L16-L24)ï¼Œèˆ‡æ–°ç‰ˆå®šç¾©ï¼ˆåŒ…å« urlã€methodã€headers ç­‰å®Œæ•´æ¬„ä½ï¼‰é‡è¤‡[[2]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/findings.py#L58-L65)ã€‚é€™å°è‡´åŒä¸€æ¦‚å¿µæœ‰å…©è™•å®šç¾©ï¼Œå¢åŠ ç¶­è­·è² æ“”å’Œæ··æ·†é¢¨éšªã€‚ | **ä¿®å¾©**ï¼šç§»é™¤æˆ–åœç”¨æƒææ¨¡çµ„å…§èˆŠçš„ `Target` å®šç¾©ï¼Œå…¨é¢æ”¹ç”¨ `aiva_common.schemas` ä¸­çš„ `Target`ã€‚ç¢ºä¿ç¨‹å¼åƒ…ä¿ç•™å–®ä¸€ä¾†æºçš„ç›®æ¨™æ¨¡å‹ï¼Œä»¥æ¶ˆé™¤é‡è¤‡ã€‚ |
| **é¡åˆ¥** | `ScanScope` æƒæç¯„åœ | *services/aiva_common/schemas/_base/common.py*[[3]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/_base/common.py#L64-L70)ï¼›*web/contracts/aiva-web-contracts.ts*[[4]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L50-L58)ï¼›*services/scan/discovery_schemas.py*[[5]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/discovery_schemas.py#L26-L34) | **é‡è¤‡å®šç¾©**ï¼š`ScanScope` åœ¨å¤šè™•å‡ºç¾ä¸”çµæ§‹ä¸ä¸€è‡´â”€â”€å¾Œç«¯åŸºç¤ Schema ä½¿ç”¨ `exclusions` å’Œ `allowed_hosts` æ¬„ä½[[3]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/_base/common.py#L64-L70)ï¼›å‰ç«¯ TypeScript åˆç´„ä½¿ç”¨ `exclude_paths`/`include_paths` ä»¥åŠ `max_depth`[[4]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L50-L58)ï¼›æƒææ¨¡çµ„ä¸­å‰‡å®šç¾©äº†å« `included_hosts`/`excluded_hosts` ç­‰æ¬„ä½çš„ç‰ˆæœ¬[[5]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/discovery_schemas.py#L26-L34)ã€‚é€™äº›é‡ç–Šå®šç¾©æ¶µè“‹ç›¸ä¼¼æ¦‚å¿µä½†æ¬„ä½å‘½åèˆ‡å…§å®¹å„ç•°ï¼Œå¯èƒ½å°è‡´å‰å¾Œç«¯å°æƒæç¯„åœç†è§£ä¸ä¸€è‡´ã€‚ | **ä¿®å¾©**ï¼šçµ±ä¸€ `ScanScope` å®šç¾©ä¾†æºï¼Œå¯è€ƒæ…®ä»¥å–®ä¸€æ¬Šå¨æ¨¡å‹ç‚ºåŸºç¤ï¼Œé€éä»£ç¢¼ç”¢ç”Ÿä¿æŒå¤šèªè¨€ä¸€è‡´ã€‚åˆªé™¤æˆ–åˆä½µå¤šé¤˜ç‰ˆæœ¬ï¼ˆå¦‚å»¢æ­¢èˆŠæƒææ¨¡çµ„å®šç¾©ï¼‰ï¼Œç¢ºä¿æ‰€æœ‰ç’°ç¯€ä½¿ç”¨ç›¸åŒçš„æ¬„ä½é›†åˆã€‚ |
| **è³‡æ–™æ¨¡å‹** | `APIResponse` æ¨™æº–å›æ‡‰ | *services/aiva_common/schemas/base.py*[[6]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/base.py#L31-L40)ï¼›*web/contracts/aiva-web-contracts.ts*[[7]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L10-L16) | **é‡è¤‡å®šç¾©**ï¼šæ¨™æº– API éŸ¿æ‡‰çµæ§‹åœ¨å¾Œç«¯ Python Schema å’Œå‰ç«¯ TS åˆç´„ä¸­å„è‡ªå®šç¾©ã€‚ä¸€æ–¹é¢æ˜¯ Pydantic æ¨¡å‹ï¼ˆå« success, message, data, timestamp, trace_id, errors ç­‰æ¬„ä½ï¼‰[[6]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/base.py#L31-L40)ï¼›å¦ä¸€æ–¹é¢æ˜¯ TypeScript ä»‹é¢ï¼ˆåƒ… success, message, data, timestamp, trace_idï¼Œæ²’æœ‰ errors/metadataï¼‰[[7]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L10-L16)ã€‚å…©è€…æ¬„ä½ç•¥æœ‰å‡ºå…¥ï¼Œé¡¯ç¤ºå‰å¾Œç«¯å„ç¶­è­·ä¸€ä»½å®šç¾©ï¼Œæ˜“ç”¢ç”Ÿä¸åŒæ­¥çš„æƒ…æ³ã€‚ | **ä¿®å¾©**ï¼šæ”¹ç”¨å–®ä¸€ä¾†æºç”Ÿæˆå‰ç«¯å›æ‡‰ä»‹é¢ã€‚ä¾‹å¦‚å¾å¾Œç«¯æ¨¡å‹è‡ªå‹•ç”Ÿæˆ TypeScript å‹åˆ¥ï¼Œç¢ºä¿æ¬„ä½ä¸€è‡´ã€‚è‹¥æœ‰å¤šé¤˜æ¬„ä½ï¼ˆå¦‚ errorsï¼‰ä¹Ÿæ‡‰è€ƒæ…®åœ¨å‰ç«¯å®šç¾©ä¸­ç´å…¥æˆ–åœ¨å‚™è¨»èªªæ˜ï¼Œä»¥ä¿æŒå¥‘ç´„åŒæ­¥ã€‚ |
| **è³‡æ–™æ¨¡å‹** | `Finding` æ¼æ´ç™¼ç¾çµæ§‹ | *services/features/base/result_schema.py*[[8]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/features/base/result_schema.py#L6-L15)ï¼›*services/aiva_common/schemas/findings.py*[[9]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/findings.py#L106-L114)ï¼ˆå¦æœ‰ TS `Finding` ä»‹é¢ï¼‰ | **é‡è¤‡å®šç¾©**ï¼šæ¼æ´ç™¼ç¾è³‡æ–™æ¨¡å‹åœ¨å¤šè™•ä»¥ä¸åŒå½¢å¼å­˜åœ¨ï¼šæ—©æœŸåŠŸèƒ½æ¨¡çµ„ä¸­ä½¿ç”¨ dataclass å®šç¾©ç°¡åŒ–çš„ `Finding`ï¼ˆå« vuln_type, severity, title ç­‰æ¬„ä½ï¼‰[[8]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/features/base/result_schema.py#L6-L15)ï¼›è€Œåœ¨çµ±ä¸€ Schema ä¸­å‰‡æœ‰ Pydantic å®šç¾©çš„ `FindingPayload`ï¼ˆå…§åµŒ Vulnerability/Target ç­‰å­çµæ§‹ï¼‰[[9]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/findings.py#L106-L114)ã€‚æ­¤å¤–å‰ç«¯ TS åˆç´„äº¦å®šç¾©äº†è‡ªå·±çš„ `Finding` ä»‹é¢ã€‚é€™äº›å®šç¾©å½¼æ­¤é‡ç–Šä½†å­—æ®µä¸å®Œå…¨ç›¸åŒï¼Œå¢åŠ äº†ç¶­è­·é›£åº¦ä¸¦å¯èƒ½å°è‡´è³‡è¨Šä¸ä¸€è‡´ã€‚ | **ä¿®å¾©**ï¼šçµ±ä¸€æ¼æ´ç™¼ç¾æ¨¡å‹çš„å®šç¾©ä¾†æºã€‚å»ºè­°æ£„ç”¨èˆŠ dataclass `Finding`ï¼Œæ”¹ç”¨å…±ç”¨çš„ Pydantic æ¨¡å‹ï¼Œä¸¦è‡ªè©²ä¾†æºç”Ÿæˆå‰ç«¯ä»‹é¢ã€‚ç¢ºä¿ã€Œç™¼ç¾ã€é¡å‹åªæœ‰ä¸€è™•å®šç¾©ï¼Œå„è™•é‡ç”¨ï¼Œå¿…è¦æ™‚åœ¨ä¸åŒä¸Šä¸‹æ–‡æ“´å……æ¬„ä½è€Œéé‡è¤‡å®šç¾©ã€‚ |
| **è³‡æ–™æ¨¡å‹** | `Asset` è³‡ç”¢è³‡è¨Š | *services/aiva_common/schemas/base.py*[[10]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/base.py#L72-L80)ï¼›*web/contracts/aiva-web-contracts.ts*[[11]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L126-L134)ï¼›*services/scan/discovery_schemas.py*[[12]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/discovery_schemas.py#L71-L79) | **é‡è¤‡å®šç¾©**ï¼šè³‡ç”¢è³‡æ–™æ¨¡å‹æœ‰å¤šç‰ˆæœ¬ï¼šå¾Œç«¯åŸºç¤ Schema ä¸­ `Asset` åƒ…åŒ…å« asset_idã€typeã€value ç­‰åŸºæœ¬è³‡è¨Š[[10]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/base.py#L72-L80)ï¼›å‰ç«¯ TS åˆç´„è£¡çš„ `Asset` ä»‹é¢å‰‡æ“´å……äº†ç‹€æ…‹ã€fingerprintsã€last_scannedã€risk_score ç­‰æ¬„ä½[[11]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L126-L134)ï¼›è€Œæƒææ¨¡çµ„åˆå®šç¾©äº†ä¸€å€‹ Assetï¼ˆurl, asset_type, status_code ç­‰ï¼‰ä¾›ç™¼ç¾è³‡ç”¢ä¹‹ç”¨[[12]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/discovery_schemas.py#L71-L79)ã€‚åŒä¸€æ¦‚å¿µåœ¨ä¸åŒæ¨¡çµ„å„è‡ªå®šç¾©ä¸¦ä¸å®Œå…¨ç›¸åŒï¼Œæ½›è—è³‡æ–™ä¸åŒæ­¥é¢¨éšªã€‚ | **ä¿®å¾©**ï¼šä»¥å–®ä¸€æ ¸å¿ƒ Asset æ¨¡å‹ç‚ºåŸºç¤ï¼Œåœ¨éœ€è¦æ™‚é€éç¹¼æ‰¿æˆ–çµ„åˆæ“´å……æ¬„ä½ï¼Œè€Œéç¨ç«‹é‡è¤‡å®šç¾©ã€‚å¯ä»¥å°‡å‰ç«¯å’Œæƒææ¨¡çµ„æ‰€éœ€çš„é™„åŠ æ¬„ä½åˆä½µå›ä¸»æ¨¡å‹æˆ–ç”±ä¸»æ¨¡å‹æ´¾ç”Ÿï¼Œä¸¦åˆ©ç”¨ä»£ç¢¼ç”Ÿæˆç¢ºä¿å„èªè¨€çš„ä¸€è‡´æ€§ã€‚ |
| **è³‡æ–™æ¨¡å‹** | `Fingerprints` æŠ€è¡“æŒ‡ç´‹ | *services/aiva_common/schemas/base.py*[[13]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/base.py#L91-L99)ï¼›*web/contracts/aiva-web-contracts.ts*[[14]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L136-L143)ï¼›*services/scan/discovery_schemas.py*[[15]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/discovery_schemas.py#L103-L110) | **é‡è¤‡å®šç¾©**ï¼šæŠ€è¡“æŒ‡ç´‹è³‡è¨Šæ¨¡å‹è¢«é‡è¤‡å®šç¾©ä¸”çµæ§‹ä¸ä¸€ã€‚å¾Œç«¯ `Fingerprints` æ¨¡å‹åŒ…å« web_serverã€framework ç­‰æ¬„ä½[[13]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/base.py#L91-L99)ï¼›å‰ç«¯å°æ‡‰çš„ `TechnicalFingerprint` ä»‹é¢å­—æ®µåç¨±èˆ‡çµæ§‹æœ‰æ‰€ä¸åŒï¼ˆå¦‚å°‡å¤šç¨®æŠ€è¡“è³‡è¨Šçµ„åˆç‚ºåµŒå¥—å±¬æ€§ï¼‰[[14]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L136-L143)ï¼›æƒææ¨¡çµ„çš„ `Fingerprints` å‰‡å®šç¾©äº† tech_stackã€servicesã€headers ç­‰é›†åˆ[[15]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/scan/discovery_schemas.py#L103-L110)ã€‚é€™ç¨®åŒåçµæ§‹åœ¨ä¸åŒåœ°æ–¹å…§å®¹ä¸ä¸€è‡´ï¼Œå®¹æ˜“é€ æˆè³‡æ–™å°æ¥å›°é›£ã€‚ | **ä¿®å¾©**ï¼šçµ±æ•´æŠ€è¡“æŒ‡ç´‹æ¨¡å‹å®šç¾©ã€‚å¯è€ƒæ…®ç”±å¾Œç«¯å–®ä¸€æ¨¡å‹å‡ºç™¼ï¼Œæä¾›å®Œæ•´çµæ§‹ï¼Œè®“å‰ç«¯åŠå„æ¨¡çµ„å¼•ç”¨æˆ–ç²¾ç°¡æ­¤æ¨¡å‹è€Œéè‡ªè¡Œå®šç¾©ã€‚åˆ©ç”¨è‡ªå‹•ç”Ÿæˆå°‡ Fingerprints çš„å®šç¾©åŒæ­¥åˆ° TS/Go ç­‰ï¼Œä»¥é¿å…æ‰‹å‹•ç¶­è­·å¤šå¥—å®šç¾©ã€‚ |
| **è³‡æ–™æ¨¡å‹** | `Authentication` & `RateLimit` èªè­‰/é€Ÿç‡é™åˆ¶ | *services/aiva_common/schemas/_base/common.py*[[16]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/_base/common.py#L43-L50)[[17]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/_base/common.py#L50-L58)ï¼›*web/contracts/aiva-web-contracts.ts*[[18]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L58-L62)[[19]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L64-L68) | **é‡è¤‡å®šç¾©**ï¼šè«‹æ±‚èªè­‰è³‡è¨Šèˆ‡é€Ÿç‡é™åˆ¶é…ç½®åœ¨å‰å¾Œç«¯å®šç¾©ä¸ä¸€è‡´ã€‚å¾Œç«¯ `Authentication` æ¨¡å‹åƒ…æœ‰é€šç”¨ `method` å’Œ `credentials`[[16]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/_base/common.py#L43-L50)ï¼›ä½†å‰ç«¯åˆç´„ä¸­å›ºå®šäº† `type` ç‚º 'none'/'basic'/'bearer' ç­‰ä¸¦å¢åŠ äº† `headers` æ¬„ä½[[18]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L58-L62)ã€‚åŒæ¨£åœ°ï¼Œå¾Œç«¯ `RateLimit` åƒ…å®šç¾©æ¯ç§’è«‹æ±‚æ•¸å’Œçªç™¼å€¼[[17]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/schemas/_base/common.py#L50-L58)ï¼›è€Œå‰ç«¯ RateLimit åŒ…å«ä¸¦ç™¼æ•¸ã€è«‹æ±‚é–“å»¶é²ç­‰ä¸åŒæ¬„ä½[[19]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/web/contracts/aiva-web-contracts.ts#L64-L68)ã€‚å…©ç«¯å„è‡ªç¶­è­·å°è‡´é€™äº›çµæ§‹ä¸åŒ¹é…ã€‚ | **ä¿®å¾©**ï¼šå°é½Šèªè­‰èˆ‡é™æµæ¨¡å‹ï¼Œè®“å‰å¾Œç«¯å…±äº«å®šç¾©ã€‚å¯åœ¨å¾Œç«¯æ¨¡å‹ä¸­åŠ å…¥å‰ç«¯éœ€è¦çš„æ¬„ä½ï¼ˆå¦‚ headersã€delay ç­‰ï¼‰ï¼Œç„¶å¾Œç”¨æ­¤çµ±ä¸€æ¨¡å‹ç”Ÿæˆ TS é¡å‹ã€‚ç¢ºä¿æœªä¾†èª¿æ•´æ™‚åŒæ­¥æ›´æ–°ï¼Œé¿å…å†å‡ºç¾æ¬„ä½å®šç¾©ä¸ä¸€è‡´çš„å•é¡Œã€‚ |
| **æšèˆ‰** | `RiskLevel` é¢¨éšªç­‰ç´š | *enums/common.py*[[20]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/common.py#L92-L99)ï¼›*enums/business.py*[[21]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/business.py#L440-L448) | **é‡è¤‡å®šç¾©**ï¼š`RiskLevel` æšèˆ‰é¡å‹åœ¨ä¸åŒæ¨¡çµ„ä¸‹è¢«å®šç¾©äº†å…©æ¬¡ã€‚ä¸€è™•åœ¨é€šç”¨æšèˆ‰ä¸­è¡¨ç¤ºé¢¨éšªç­‰ç´šcritical/highç­‰[[20]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/common.py#L92-L99)ï¼›å¦ä¸€è™•åœ¨æ¥­å‹™æšèˆ‰ä¸­ä¹Ÿä½¿ç”¨ç›¸åŒåç¨±ä½†å€¼é›†ä¸åŒï¼ˆVERY_LOW, LOW, ... CRITICALï¼‰[[21]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/business.py#L440-L448)ã€‚åŒåçš„æšèˆ‰å­˜åœ¨å…©ä»½ï¼Œä¸åƒ…åç¨±è¡çªï¼Œä¹Ÿå¯èƒ½æ··æ·†ä½¿ç”¨è€…ä¸çŸ¥é“è©²å¼•ç”¨å“ªä¸€å€‹ã€‚ | **ä¿®å¾©**ï¼šé¿å…åœ¨å–®ä¸€ç¨‹å¼ä¸­å®šç¾©é‡åæšèˆ‰ã€‚è‹¥å…©è€…èªç¾©ç›¸è¿‘ï¼Œæ‡‰åˆä½µç‚ºå–®ä¸€ `RiskLevel` æšèˆ‰ä¸¦çµ±ä¸€å€¼åŸŸï¼›è‹¥èªç¾©ä¸åŒï¼Œæ‡‰æ›´åå€åˆ†ï¼ˆä¾‹å¦‚ä¸€å€‹æ”¹åç‚º RiskRatingï¼‰ã€‚ç¢ºä¿åŒåæšèˆ‰åªä¿ç•™ä¸€ä»½ï¼Œä»¥æ¶ˆé™¤å‘½åè¡çªã€‚ |
| **æšèˆ‰** | `DataFormat` è³‡æ–™æ ¼å¼ | *enums/common.py*[[22]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/common.py#L741-L749)ï¼›*enums/data_models.py*[[23]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/data_models.py#L24-L32) | **é‡è¤‡å®šç¾©**ï¼š`DataFormat` æšèˆ‰äº¦å‡ºç¾å…©ç¨®ç‰ˆæœ¬ï¼šåœ¨é€šç”¨æšèˆ‰ä¸­å°æ‡‰ JSONã€XMLã€YAML ç­‰ MIME é¡å‹[[22]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/common.py#L741-L749)ï¼›è€Œåœ¨ data_models æšèˆ‰ä¸­å®šç¾©äº† json, xml, yaml ç­‰æª”æ¡ˆæ ¼å¼å­—ä¸²[[23]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/data_models.py#L24-L32)ã€‚å…©è€…åç¨±ç›¸åŒä½†å…§å®¹ä¸åŒï¼Œæœƒå°è‡´é–‹ç™¼è€…èª¤ç”¨ï¼Œä¸”åœ¨å°å…¥æ™‚å¯èƒ½ç”¢ç”Ÿåç¨±é®è”½æˆ–è¡çªã€‚ | **ä¿®å¾©**ï¼šå°‡é€™å…©çµ„æšèˆ‰åˆä½µæˆ–é‡æ–°å‘½åä»¥å€åˆ†ç”¨é€”ã€‚ä¾‹å¦‚ï¼Œå¯å°‡é€šç”¨ç‰ˆå‘½åç‚º `MimeType`ï¼Œå°‡è³‡æ–™æ¨¡å‹ç‰ˆä¿ç•™ç‚º `DataFormat`ï¼Œæˆ–åä¹‹ã€‚ç¢ºä¿å°ˆæ¡ˆä¸­æ¯å€‹æ¦‚å¿µåªæœ‰å–®ä¸€æšèˆ‰å®šç¾©ï¼Œæ¸›å°‘é‡è¤‡ã€‚ |
| **æšèˆ‰** | `EncodingType` ç·¨ç¢¼é¡å‹ | *enums/common.py*[[24]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/common.py#L756-L764)ï¼›*enums/data_models.py*[[25]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/data_models.py#L64-L72) | **é‡è¤‡å®šç¾©**ï¼š`EncodingType` åœ¨é€šç”¨èˆ‡è³‡æ–™æ¨¡å‹å…©è™•å„å®šç¾©äº†ä¸€ä»½ï¼šé€šç”¨æšèˆ‰æ¶µè“‹ UTF-8/UTF-16/ASCII åŠéƒ¨åˆ†å‚³è¼¸ç·¨ç¢¼[[24]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/common.py#L756-L764)ï¼›data_models æšèˆ‰å‰‡åˆ—èˆ‰äº†æ›´å»£æ³›çš„æ–‡å­—ç·¨ç¢¼ï¼ˆUTF8, UTF16, UTF32 ç­‰ï¼‰[[25]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/data_models.py#L64-L72)ã€‚å‡ºç¾å…©å€‹ä¸åŒå…§å®¹çš„ EncodingTypeï¼Œä¸åƒ…é‡åï¼ŒåŠŸèƒ½ä¹Ÿæœ‰é‡ç–Šï¼Œæ˜“é€ æˆéŒ¯ç”¨æˆ–ç¶­è­·å›°é›£ã€‚ | **ä¿®å¾©**ï¼šåŒæ¨£åœ°ï¼Œæ‡‰åˆä½µæˆ–æ”¹åé€™å…©å€‹ EncodingType æšèˆ‰ã€‚è‹¥éœ€å€åˆ†ç”¨é€”ï¼Œå¯å°‡å…¶ä¸­ä¸€å€‹å‘½åç‚º `CharEncoding` æˆ–é¡ä¼¼åç¨±ã€‚æœ€å¥½çµ±ä¸€ç”±å–®ä¸€ä¾†æºå®šç¾©ï¼Œå…¶ä»–åœ°æ–¹å¼•ç”¨ï¼Œé¿å…å¹³è¡Œç¶­è­·å…©ä»½åˆ—è¡¨ã€‚ |
| **æšèˆ‰å€¼ï¼ˆåˆ¥åï¼‰** | `Topic.SCAN_START` vs `Topic.TASK_SCAN_START` | *enums/modules.py*[[26]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/modules.py#L250-L258) | **é‡è¤‡å€¼**ï¼šåœ¨ `Topic` æšèˆ‰ä¸­ï¼Œ`SCAN_START` å’Œ `TASK_SCAN_START` å…©å€‹æˆå“¡å…±ç”¨äº†ç›¸åŒå­—ä¸²å€¼ `"tasks.scan.start"`[[26]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/aiva_common/enums/modules.py#L250-L258)ï¼ˆå…¶ä¸­ä¸€å€‹ä½œç‚ºåˆ¥åä»¥ç¶­æŒå‘å¾Œç›¸å®¹ï¼‰ã€‚é›–ç„¶é€™æ˜¯æœ‰æ„çš„åˆ¥åï¼Œä½†æœ¬è³ªä¸Šå®šç¾©äº†é‡è¤‡çš„å¸¸é‡ï¼Œå¯èƒ½è®“ä»£ç¢¼è®€è€…å›°æƒ‘ï¼Œä¸”å¢åŠ æœªä¾†ç¶­è­·è² æ“”ï¼ˆéœ€è¦åŒæ™‚æ›´æ–°æˆ–è€ƒæ…®å…©å€‹åç¨±ï¼‰ã€‚ | **ä¿®å¾©**ï¼šå¦‚ä¸å†éœ€è¦å‘å¾Œç›¸å®¹ï¼Œå¯ç§»é™¤é‡è¤‡çš„åˆ¥åï¼Œä¿ç•™å–®ä¸€åç¨±ã€‚å¦‚å¿…é ˆä¿ç•™ï¼Œå¯åœ¨è¨»è§£æ˜ç¢ºæ¨™ç¤ºå…¶ç‚ºåˆ¥åä¸”å°‡æ·˜æ±°ã€‚ç¸½é«”è€Œè¨€æ‡‰é¼“å‹µä½¿ç”¨å–®ä¸€å®šç¾©ï¼ˆå¦‚åƒ…ç”¨ `TASK_SCAN_START`ï¼‰ï¼Œé¿å…æœªä¾†ç¨‹å¼ä½¿ç”¨æ··é›œå…©ç¨®åç¨±ã€‚ |
| **å¤šèªè¨€åˆç´„** | è·¨èªè¨€æ¨¡å‹å®šç¾©é‡è¤‡ | *web/contracts/aiva-web-contracts.ts* ç­‰å‰ç«¯/æ¨¡æ¿æª”æ¡ˆï¼›ï¼ˆå…ˆå‰é‚„æœ‰ aiva_schemas.go, .rs ç­‰ï¼‰[[27]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/reports/misc/FILE_CLEANUP_PLAN.md#L29-L37) | **é‡è¤‡å®šç¾©**ï¼šéå» AIVA é‡å°ä¸åŒèªè¨€åˆ†åˆ¥ç¶­è­·ä¸€å¥—æ¨¡å‹å®šç¾©ï¼Œå¦‚ç¨ç«‹çš„ TypeScript åˆç´„æª”ã€Go çš„çµæ§‹æª”ã€Rust æ¨¡å‹æª”ç­‰ï¼Œå„å«æœ‰å¤§é‡èˆ‡å¾Œç«¯ Schema é‡ç–Šçš„æ¨¡å‹æè¿°[[27]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/reports/misc/FILE_CLEANUP_PLAN.md#L29-L37)ã€‚åœ¨æœªå®Œå…¨è‡ªå‹•åŒæ­¥æ™‚ï¼Œé€™å°è‡´å¤šä»½ä¾†æºéœ€è¦æ‰‹å‹•ç¶­è­·ï¼Œæ¥µæ˜“ç™¼ç”Ÿæ¨¡å‹ä¸ä¸€è‡´æˆ–éºæ¼æ›´æ–°ã€‚ | **ä¿®å¾©**ï¼šæ¡ç”¨ **å–®ä¸€ä¾†æºåŸå‰‡**ï¼Œé€éæ ¸å¿ƒ Schema (å¦‚ `core_schema_sot.yaml`) è‡ªå‹•ç”¢ç”Ÿå„èªè¨€åˆç´„[[28]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/plugins/aiva_converters/README.md#L11-L19)ã€‚å·²é€æ­¥å°‡é€™äº›æ‰‹å¯«çš„å¤šèªè¨€å®šç¾©ç§»é™¤æˆ–é·ç§»åˆ°ç”Ÿæˆæª”æ¡ˆï¼ˆå¦‚ *services/aiva_common/schemas/generated/* ç­‰[[29]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/reports/misc/FILE_CLEANUP_PLAN.md#L53-L56)ï¼‰ã€‚ç¢ºä¿æœªä¾†ä¿®æ”¹æ¨¡å‹åªéœ€æ›´æ–°ä¸€è™•ï¼Œç„¶å¾Œé‡æ–°ç”Ÿæˆå„èªè¨€å¥‘ç´„å³å¯ã€‚ |
| **åŠŸèƒ½/èƒ½åŠ›æ¨¡çµ„** | æ•¸ä½é‘‘è­˜å·¥å…·é¡ï¼ˆForensic Tools ç­‰ï¼‰ | *services/features/forensic_tools.py*[[30]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/features/forensic_tools.py#L23-L31)ï¼›*services/integration/capability/forensic_tools.py*[[31]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/integration/capability/forensic_tools.py#L192-L200) | **é‡è¤‡é‚è¼¯**ï¼šæŸäº›åŠŸèƒ½æ¨¡çµ„çš„å¯¦ä½œåœ¨"èƒ½åŠ›æ¨¡çµ„"ä¸­é‡è¤‡å‡ºç¾ã€‚ä¾‹å¦‚ã€Œæ•¸ä½é‘‘è­˜å·¥å…·ã€åŸå…ˆåœ¨ `services/features/forensic_tools.py` ä¸­å®šç¾©äº†ä¸€çµ„å·¥å…·é¡åˆ¥ï¼ˆAutopsyã€Wireshark ç­‰ï¼‰[[30]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/features/forensic_tools.py#L23-L31)ï¼Œå¾Œä¾†åœ¨ `services/integration/capability/forensic_tools.py` åˆè¤‡è£½äº†ä¸€ä»½å¹¾ä¹ç›¸åŒçš„é¡åˆ¥å¯¦ä½œ[[31]](https://github.com/kyle0527/AIVA/blob/2c1538d3ef2eaa14e7c151ad28fcc7a6cfbea882/services/integration/capability/forensic_tools.py#L192-L200)ã€‚æ­¤é¡ **HackingTool** é¡å·¥å…·é›†åœ¨å…©è™•å¹³è¡Œå­˜åœ¨ï¼Œé€ æˆç¨‹å¼é‡è¤‡ã€ç¶­è­·åŒæ­¥å›°é›£ã€‚å…¶å®ƒé¡ä¼¼çš„å·¥å…·æ¨¡çµ„ï¼ˆå¦‚éš±å¯«è¡“å·¥å…·ã€é€†å‘å·¥ç¨‹å·¥å…·ç­‰ï¼‰å¾ˆå¯èƒ½ä¹Ÿæœ‰é¡ä¼¼çš„é‡è¤‡æƒ…æ³ã€‚ | **ä¿®å¾©**ï¼šå°‡é‡è¤‡çš„åŠŸèƒ½æ”¶æ–‚åˆ°å–®ä¸€æ¨¡çµ„ã€‚å¯é¸æ“‡ä¿ç•™æ–°çš„æ•´åˆæ¨¡çµ„å¯¦ç¾ï¼Œä¸¦åˆªé™¤èˆŠ features æ¨¡çµ„ï¼Œæˆ–è€…è®“èƒ½åŠ›æ¨¡çµ„ç›´æ¥å¼•ç”¨åŸåŠŸèƒ½æ¨¡çµ„çš„é¡åˆ¥è€Œéè¤‡è£½ã€‚é€éæ¨¡çµ„åˆä½µæˆ–å…±ç”¨ï¼Œç¢ºä¿æ¯å€‹å·¥å…·é¡åˆ¥åªæœ‰å–®ä¸€å¯¦ç¾ä¾†æºï¼Œå¾ŒçºŒæ›´æ–°æˆ–ä¿®æ­£æ™‚ä¸éœ€å¤šè™•ä¿®æ”¹ã€‚ |

---

## ğŸ¯ ä¿®å¾©åŸ·è¡Œè¨ˆåŠƒ

### ğŸ”´ **éšæ®µä¸€ï¼šç·Šæ€¥ä¿®å¾© (Week 1)**
**ç›®æ¨™**: æ¶ˆé™¤å½±éŸ¿ç³»çµ±ç·¨è­¯å’Œ Schema ä¸€è‡´æ€§çš„é—œéµå•é¡Œ

#### **1.1 æšèˆ‰é‡è¤‡å®šç¾©ä¿®å¾©**
```python
# ğŸ¯ åŸ·è¡Œé …ç›®
- services/aiva_common/enums/common.py
- services/aiva_common/enums/business.py  
- services/aiva_common/enums/data_models.py

# ğŸ”§ ä¿®å¾©å‹•ä½œ
1. åˆä½µé‡è¤‡æšèˆ‰æˆ–é‡å‘½åå€åˆ†
2. æ›´æ–°æ‰€æœ‰å¼•ç”¨ä½ç½®
3. åŸ·è¡Œè‡ªå‹•åŒ–æ¸¬è©¦é©—è­‰
```

#### **1.2 æ ¸å¿ƒè³‡æ–™æ¨¡å‹çµ±ä¸€**
```python
# ğŸ¯ åŸ·è¡Œé …ç›®
- services/scan/schemas.py (ç§»é™¤å»¢æ£„ Target)
- services/features/base/result_schema.py (çµ±ä¸€ Finding)
- services/aiva_common/schemas/findings.py (ä¸»è¦ä¾†æº)

# ğŸ”§ ä¿®å¾©å‹•ä½œ
1. ç§»é™¤å·²æ¨™è¨˜å»¢æ£„çš„èˆŠå®šç¾©
2. çµ±ä¸€ä½¿ç”¨ aiva_common ä¸­çš„æ¨™æº–å®šç¾©
3. æ›´æ–°å°å…¥èªå¥
```

### ğŸŸ¡ **éšæ®µäºŒï¼šæ¶æ§‹çµ±ä¸€ (Week 2-3)**
**ç›®æ¨™**: å¯¦ç¾ AIVA v5.0 è·¨èªè¨€ Schema å®Œå…¨çµ±ä¸€
3. **è·¨èªè¨€åˆç´„ä¸ä¸€è‡´** - å½±éŸ¿å‰å¾Œç«¯æ•´åˆ
   - `APIResponse` å‰å¾Œç«¯å®šç¾©ä¸åŒ
   - `ScanScope` å¤šç‰ˆæœ¬ä¸ä¸€è‡´
   - `Authentication` & `RateLimit` å‰å¾Œç«¯å·®ç•°

4. **è³‡ç”¢èˆ‡æŒ‡ç´‹æ¨¡å‹** - å½±éŸ¿è³‡æ–™å®Œæ•´æ€§
   - `Asset` è³‡ç”¢æ¨¡å‹å¤šç‰ˆæœ¬
   - `Fingerprints` æŠ€è¡“æŒ‡ç´‹ä¸ä¸€è‡´

### ğŸŸ¢ **ä½å„ªå…ˆç´šï¼ˆé¸æ“‡æ€§ä¿®å¾©ï¼‰**
5. **åŠŸèƒ½æ¨¡çµ„é‡è¤‡å¯¦ç¾** - å½±éŸ¿ç¶­è­·æ•ˆç‡
   - æ•¸ä½é‘‘è­˜å·¥å…·é‡è¤‡å¯¦ç¾
   - å…¶ä»–å·¥å…·é¡åˆ¥å¯èƒ½çš„é‡è¤‡

6. **æšèˆ‰åˆ¥åå•é¡Œ** - å½±éŸ¿ä»£ç¢¼æ¸…æ½”åº¦
   - `Topic.SCAN_START` vs `Topic.TASK_SCAN_START`

---

## ğŸ› ï¸ ä¿®å¾©ç­–ç•¥å»ºè­°

### ğŸ“‹ **éšæ®µä¸€ï¼šæšèˆ‰çµ±ä¸€ä¿®å¾©**
```python
# 1. åˆä½µé‡è¤‡æšèˆ‰æˆ–é‡å‘½åå€åˆ†
# services/aiva_common/enums/common.py
class RiskLevel(str, Enum):
    """çµ±ä¸€é¢¨éšªç­‰ç´šå®šç¾©ï¼ˆåˆä½µç‰ˆï¼‰"""
    CRITICAL = "critical"
    HIGH = "high"
    MEDIUM = "medium"
    LOW = "low"
    INFO = "info"

# ç§»é™¤ business.py ä¸­çš„é‡è¤‡ RiskLevel å®šç¾©
# æˆ–é‡å‘½åç‚º BusinessRiskRating ä»¥å€åˆ†ç”¨é€”
```

### ğŸ“‹ **éšæ®µäºŒï¼šæ ¸å¿ƒæ¨¡å‹çµ±ä¸€**
```python
# 2. çµ±ä¸€ Target æ¨¡å‹å®šç¾©
# ç§»é™¤ services/scan/schemas.py ä¸­çš„èˆŠ Target å®šç¾©
# å…¨é¢ä½¿ç”¨ services/aiva_common/schemas/findings.py ä¸­çš„ Target

# 3. çµ±ä¸€ Finding æ¨¡å‹
# æ£„ç”¨ services/features/base/result_schema.py ä¸­çš„ dataclass Finding
# å…¨é¢ä½¿ç”¨ services/aiva_common/schemas/findings.py ä¸­çš„ FindingPayload
```

### ğŸ“‹ **éšæ®µä¸‰ï¼šè·¨èªè¨€åˆç´„ç”Ÿæˆ**
```yaml
# 4. ä½¿ç”¨ Schema è‡ªå‹•ç”Ÿæˆå·¥å…·
# å¾ services/aiva_common/core_schema_sot.yaml ç”Ÿæˆ
python services/aiva_common/tools/schema_codegen_tool.py --lang typescript
python services/aiva_common/tools/schema_codegen_tool.py --lang go
python services/aiva_common/tools/schema_codegen_tool.py --lang rust
```

### ğŸ“‹ **éšæ®µå››ï¼šåŠŸèƒ½æ¨¡çµ„æ•´åˆ**
```python
# 5. åŠŸèƒ½æ¨¡çµ„å»é‡
# é¸æ“‡ä¿ç•™ services/integration/capability/ ä¸‹çš„æ–°å¯¦ç¾
# ç§»é™¤ services/features/ ä¸‹çš„é‡è¤‡å¯¦ç¾
# æˆ–å»ºç«‹å¼•ç”¨é—œä¿‚è€Œéè¤‡è£½ä»£ç¢¼
```

---

## ï¿½ï¸ è‡ªå‹•åŒ–ä¿®å¾©åŸ·è¡Œå·¥å…·

### ğŸ“‹ **ä¿®å¾©è…³æœ¬é–‹ç™¼è¦ç¯„**
åŸºæ–¼ [AIVA Common é–‹ç™¼æŒ‡å—](../../services/aiva_common/README.md#ğŸ”§-é–‹ç™¼æŒ‡å—)

```python
#!/usr/bin/env python3
"""
AIVA é‡è¤‡å®šç¾©å•é¡Œè‡ªå‹•åŒ–ä¿®å¾©å·¥å…·
ç¬¦åˆ AIVA v5.0 è·¨èªè¨€çµ±ä¸€æ¶æ§‹æ¨™æº–

ä½¿ç”¨æ–¹å¼:
    python scripts/analysis/duplication_fix_tool.py --phase 1
    python scripts/analysis/duplication_fix_tool.py --verify
"""

from pathlib import Path
from typing import Dict, List, Tuple
from services.aiva_common.schemas.base import APIResponse
from services.aiva_common.enums import ModuleName, TaskStatus

class AIVADuplicationFixTool:
    """
    AIVA é‡è¤‡å®šç¾©ä¿®å¾©å·¥å…·
    éµå¾ªå–®ä¸€ä¾†æºåŸå‰‡ (SOT) å’Œ aiva_common æ¨™æº–
    """
    
    def __init__(self):
        self.base_path = Path(__file__).parent.parent.parent
        self.fix_report = []
    
    async def execute_phase_1_fixes(self) -> APIResponse:
        """éšæ®µä¸€ï¼šç·Šæ€¥ä¿®å¾©åŸ·è¡Œ"""
        try:
            # 1. æšèˆ‰é‡è¤‡å®šç¾©ä¿®å¾©
            enum_fixes = await self._fix_enum_duplications()
            
            # 2. æ ¸å¿ƒæ¨¡å‹çµ±ä¸€
            model_fixes = await self._fix_core_model_duplications()
            
            # 3. ç”Ÿæˆä¿®å¾©å ±å‘Š
            report = self._generate_fix_report(enum_fixes, model_fixes)
            
            return APIResponse(
                success=True,
                message="éšæ®µä¸€ä¿®å¾©å®Œæˆ",
                data=report,
                trace_id=f"fix_{int(time.time())}"
            )
        except Exception as e:
            return APIResponse(
                success=False,
                message=f"ä¿®å¾©åŸ·è¡Œå¤±æ•—: {str(e)}",
                errors=[str(e)]
            )
    
    async def _fix_enum_duplications(self) -> List[Dict]:
        """ä¿®å¾©æšèˆ‰é‡è¤‡å®šç¾©"""
        fixes = []
        
        # ä¿®å¾© RiskLevel é‡è¤‡
        risk_level_fix = await self._merge_risk_level_enums()
        fixes.append(risk_level_fix)
        
        # ä¿®å¾© DataFormat é‡è¤‡
        data_format_fix = await self._rename_data_format_enums()
        fixes.append(data_format_fix)
        
        # ä¿®å¾© EncodingType é‡è¤‡
        encoding_fix = await self._merge_encoding_type_enums()
        fixes.append(encoding_fix)
        
        return fixes
    
    async def verify_fixes(self) -> APIResponse:
        """é©—è­‰ä¿®å¾©çµæœ"""
        try:
            # 1. å°å…¥æ¸¬è©¦
            import_results = await self._verify_imports()
            
            # 2. Schema ä¸€è‡´æ€§æª¢æŸ¥
            schema_results = await self._verify_schema_consistency()
            
            # 3. è·¨èªè¨€ç”Ÿæˆæ¸¬è©¦
            codegen_results = await self._verify_codegen()
            
            success = all([
                import_results.get('success', False),
                schema_results.get('success', False),
                codegen_results.get('success', False)
            ])
            
            return APIResponse(
                success=success,
                message="ä¿®å¾©é©—è­‰å®Œæˆ" if success else "é©—è­‰ç™¼ç¾å•é¡Œ",
                data={
                    'import_tests': import_results,
                    'schema_consistency': schema_results,
                    'codegen_tests': codegen_results
                }
            )
        except Exception as e:
            return APIResponse(
                success=False,
                message=f"é©—è­‰å¤±æ•—: {str(e)}",
                errors=[str(e)]
            )

if __name__ == "__main__":
    import asyncio
    import argparse
    
    parser = argparse.ArgumentParser(description='AIVA é‡è¤‡å®šç¾©ä¿®å¾©å·¥å…·')
    parser.add_argument('--phase', type=int, choices=[1, 2, 3, 4], 
                       help='åŸ·è¡Œéšæ®µ (1-4)')
    parser.add_argument('--verify', action='store_true', 
                       help='é©—è­‰ä¿®å¾©çµæœ')
    parser.add_argument('--dry-run', action='store_true',
                       help='è©¦é‹è¡Œæ¨¡å¼ï¼ˆä¸å¯¦éš›ä¿®æ”¹æª”æ¡ˆï¼‰')
    
    args = parser.parse_args()
    
    async def main():
        tool = AIVADuplicationFixTool()
        
        if args.verify:
            result = await tool.verify_fixes()
            print(f"é©—è­‰çµæœ: {result.message}")
            if not result.success:
                print(f"éŒ¯èª¤: {result.errors}")
                exit(1)
        
        elif args.phase == 1:
            result = await tool.execute_phase_1_fixes()
            print(f"éšæ®µä¸€ä¿®å¾©: {result.message}")
            if result.success:
                print("âœ… æšèˆ‰é‡è¤‡å®šç¾©å·²ä¿®å¾©")
                print("âœ… æ ¸å¿ƒæ¨¡å‹é‡è¤‡å·²çµ±ä¸€")
            else:
                print(f"âŒ ä¿®å¾©å¤±æ•—: {result.errors}")
        
        else:
            print("è«‹æŒ‡å®š --phase æˆ– --verify åƒæ•¸")
            parser.print_help()
    
    asyncio.run(main())
```

### ğŸ”§ **ä¿®å¾©å·¥å…·ä½¿ç”¨æ–¹å¼**

#### **Step 1: åŸ·è¡Œéšæ®µä¸€ä¿®å¾©**
```bash
# é€²å…¥ AIVA å°ˆæ¡ˆæ ¹ç›®éŒ„
cd /path/to/AIVA-git

# åŸ·è¡Œéšæ®µä¸€ä¿®å¾©ï¼ˆæšèˆ‰å’Œæ ¸å¿ƒæ¨¡å‹ï¼‰
python scripts/analysis/duplication_fix_tool.py --phase 1

# é©—è­‰ä¿®å¾©çµæœ
python scripts/analysis/duplication_fix_tool.py --verify
```

#### **Step 2: Schema ç”Ÿæˆé©—è­‰**
```bash
# ä½¿ç”¨ç¾æœ‰çš„ AIVA Schema ç”Ÿæˆå·¥å…·
python services/aiva_common/tools/schema_codegen_tool.py --lang all

# é©—è­‰è·¨èªè¨€ä¸€è‡´æ€§
python tools/schema_compliance_validator.py --mode detailed
```

#### **Step 3: ç³»çµ±å¥åº·æª¢æŸ¥**
```bash
# åŸ·è¡Œå®Œæ•´å¥åº·æª¢æŸ¥
python scripts/utilities/health_check.py --comprehensive

# AI ç³»çµ±é©—è­‰
python scripts/ai_analysis/ai_system_explorer_v3.py --validate
```

---

## ğŸ“Š åŸ·è¡Œé‡Œç¨‹ç¢‘èˆ‡æˆåŠŸæŒ‡æ¨™

### ğŸ¯ **éšæ®µæ€§ç›®æ¨™**

| **éšæ®µ** | **åŸ·è¡Œæ™‚ç¨‹** | **æˆåŠŸæŒ‡æ¨™** | **é©—è­‰æ–¹å¼** |
|----------|-------------|-------------|-------------|
| **éšæ®µä¸€** | Week 1 | âœ… 0å€‹æšèˆ‰è¡çª<br>âœ… æ ¸å¿ƒæ¨¡å‹çµ±ä¸€ | `health_check.py` é€šé |
| **éšæ®µäºŒ** | Week 2-3 | âœ… è·¨èªè¨€åˆç´„çµ±ä¸€<br>âœ… API ä»‹é¢ä¸€è‡´ | `schema_codegen_tool.py` æˆåŠŸ |
| **éšæ®µä¸‰** | Week 4 | âœ… åŠŸèƒ½æ¨¡çµ„æ•´åˆ<br>âœ… æ•ˆèƒ½æ¸¬è©¦é€šé | `comprehensive_system_validation.py` |
| **éšæ®µå››** | Week 5 | âœ… 100% Schema çµ±ä¸€<br>âœ… æ–‡æª”æ›´æ–°å®Œæˆ | å®Œæ•´ç³»çµ±æ¸¬è©¦é€šé |

### ğŸ“ˆ **é æœŸæ•ˆç›Š**

#### **ğŸ”§ æŠ€è¡“æ•ˆç›Š**
- **æ¶æ§‹ä¸€è‡´æ€§**: å¯¦ç¾ 100% Schema çµ±ä¸€ï¼Œç¬¦åˆ AIVA v5.0 æ¨™æº–
- **ç¶­è­·æ•ˆç‡**: æ¸›å°‘ 80% é‡è¤‡ä»£ç¢¼ç¶­è­·å·¥ä½œ
- **é–‹ç™¼é€Ÿåº¦**: æå‡ 50% è·¨èªè¨€é–‹ç™¼æ•ˆç‡
- **ç³»çµ±ç©©å®šæ€§**: æ¶ˆé™¤å› é‡è¤‡å®šç¾©å°è‡´çš„æ½›åœ¨éŒ¯èª¤

#### **ğŸ“Š é‡åŒ–æŒ‡æ¨™**
- **é‡è¤‡å®šç¾©**: å¾ 12 é¡ â†’ 0 é¡
- **Schema æª”æ¡ˆ**: çµ±ä¸€åˆ°å–®ä¸€ä¾†æº (`core_schema_sot.yaml`)
- **ä»£ç¢¼å“è³ª**: ç¬¦åˆ `aiva_common` é–‹ç™¼è¦ç¯„
- **æ¸¬è©¦è¦†è“‹**: 100% ä¿®å¾©é©—è­‰é€šé

## ï¿½ï¸ **è‡ªå‹•åŒ–ä¿®å¾©å·¥å…·**

### ğŸ“¦ **å·¥å…·æ¸…å–®**
| **å·¥å…·åç¨±** | **ä½ç½®** | **ç”¨é€”** |
|-------------|---------|---------|
| **duplication_fix_tool.py** | `scripts/analysis/duplication_fix_tool.py` | Python ä¿®å¾©å·¥å…·æ ¸å¿ƒ |
| **fix-duplicates.ps1** | `fix-duplicates.ps1` | PowerShell åŸ·è¡Œè…³æœ¬ |

### ğŸš€ **ä½¿ç”¨æ–¹å¼**

#### **æ–¹å¼ä¸€ï¼šPowerShell è…³æœ¬ï¼ˆæ¨è–¦ï¼‰**
```powershell
# æŸ¥çœ‹ä½¿ç”¨èªªæ˜
.\fix-duplicates.ps1 -Help

# è©¦é‹è¡Œæ¨¡å¼ï¼ˆå®‰å…¨é è¦½ï¼‰
.\fix-duplicates.ps1 -Phase 1 -DryRun

# åŸ·è¡Œéšæ®µä¸€ä¿®å¾©
.\fix-duplicates.ps1 -Phase 1

# é©—è­‰ä¿®å¾©çµæœ
.\fix-duplicates.ps1 -Verify
```

#### **æ–¹å¼äºŒï¼šç›´æ¥èª¿ç”¨ Python å·¥å…·**
```bash
# åŸ·è¡Œéšæ®µä¸€ä¿®å¾©
python scripts/analysis/duplication_fix_tool.py --phase 1

# è©¦é‹è¡Œæ¨¡å¼
python scripts/analysis/duplication_fix_tool.py --phase 1 --dry-run

# é©—è­‰ä¿®å¾©çµæœ
python scripts/analysis/duplication_fix_tool.py --verify

# è©³ç´°è¼¸å‡ºæ¨¡å¼
python scripts/analysis/duplication_fix_tool.py --phase 1 --verbose
```

### ğŸ”’ **å®‰å…¨ç‰¹æ€§**
- âœ… **è©¦é‹è¡Œæ¨¡å¼**: å…ˆé è¦½ä¿®å¾©è¨ˆåŠƒï¼Œä¸å¯¦éš›ä¿®æ”¹æª”æ¡ˆ
- âœ… **ç’°å¢ƒæª¢æŸ¥**: è‡ªå‹•æª¢æŸ¥ Python ç’°å¢ƒå’Œ AIVA ä¾è³´
- âœ… **ç”¨æˆ¶ç¢ºèª**: éè©¦é‹è¡Œæ¨¡å¼éœ€è¦ç”¨æˆ¶ç¢ºèªæ‰åŸ·è¡Œ
- âœ… **å®Œæ•´é©—è­‰**: å…§å»ºå¤šå±¤é©—è­‰æ©Ÿåˆ¶
- âœ… **è©³ç´°æ—¥èªŒ**: å®Œæ•´è¨˜éŒ„æ‰€æœ‰æ“ä½œéç¨‹

### ğŸ“Š **å·¥å…·åŠŸèƒ½**
- ğŸ”§ **éšæ®µä¸€ä¿®å¾©**: æšèˆ‰é‡è¤‡å®šç¾©ä¿®å¾© + æ ¸å¿ƒæ¨¡å‹çµ±ä¸€
- ğŸ§ª **å®Œæ•´é©—è­‰**: å°å…¥æ¸¬è©¦ã€Schema ä¸€è‡´æ€§æª¢æŸ¥ã€ç³»çµ±å¥åº·æª¢æŸ¥
- ğŸ“ˆ **è©³ç´°å ±å‘Š**: ç”Ÿæˆå®Œæ•´çš„ä¿®å¾©åŸ·è¡Œå ±å‘Š
- ğŸ”„ **å‘å¾Œç›¸å®¹**: ä¿è­‰ 100% å‘å¾Œç›¸å®¹æ€§

## ğŸš€ ç«‹å³è¡Œå‹•é …ç›®

### âœ… **æº–å‚™å·¥ä½œ**
```powershell
# 1. å‚™ä»½ç•¶å‰ä»£ç¢¼
git checkout -b fix/duplicate-definitions-phase-1

# 2. ç’°å¢ƒæª¢æŸ¥
.\fix-duplicates.ps1 -Help

# 3. åŸºç·šæ¸¬è©¦
python scripts/utilities/health_check.py
```

### ğŸ¯ **åŸ·è¡Œæ­¥é©Ÿ**
```powershell
# Step 1: å®‰å…¨é è¦½ï¼ˆå¼·çƒˆå»ºè­°ï¼‰
.\fix-duplicates.ps1 -Phase 1 -DryRun

# Step 2: åŸ·è¡Œä¿®å¾©
.\fix-duplicates.ps1 -Phase 1

# Step 3: é©—è­‰çµæœ
.\fix-duplicates.ps1 -Verify

# Step 4: æäº¤è®Šæ›´
git add .
git commit -m "ğŸ”§ Phase 1: Fix enum duplications and core model unification

âœ… Fixed duplicate enums: RiskLevel, DataFormat, EncodingType
âœ… Unified core models: Target, Finding
âœ… Removed deprecated schema definitions
âœ… All verification tests passed"
- Update all import statements

Resolves: é‡è¤‡å®šç¾©å•é¡Œä¸€è¦½è¡¨ Phase 1 items
Follows: AIVA Common development standards"

# Step 5: ç¹¼çºŒå¾ŒçºŒéšæ®µæˆ–å‰µå»º PR
git push origin fix/duplicate-definitions-phase-1
```

## ğŸ“ æ”¯æ´èˆ‡åƒè€ƒ

### ğŸ“š **ç›¸é—œæ–‡æª”**
- [AIVA Common é–‹ç™¼æŒ‡å—](../../services/aiva_common/README.md#ğŸ”§-é–‹ç™¼æŒ‡å—)
- [Schema æ¨™æº–åŒ–å ±å‘Š](../../reports/SCHEMA_STANDARDIZATION_COMPLETION_REPORT.md)
- [è·¨èªè¨€æ¶æ§‹æŒ‡å—](../../guides/architecture/CROSS_LANGUAGE_SCHEMA_GUIDE.md)
- [é–‹ç™¼ç’°å¢ƒè¨­ç½®](../../guides/development/DEVELOPMENT_QUICK_START_GUIDE.md)

### ğŸ”§ **ç›¸é—œå·¥å…·**
- **Schema ç”Ÿæˆ**: `services/aiva_common/tools/schema_codegen_tool.py`
- **åˆè¦é©—è­‰**: `tools/schema_compliance_validator.py`  
- **å¥åº·æª¢æŸ¥**: `scripts/utilities/health_check.py`
- **ç³»çµ±é©—è­‰**: `scripts/testing/comprehensive_system_validation.py`

---

**ğŸ“ å ±å‘Šç¸½çµ**ï¼šæœ¬å ±å‘ŠåŸºæ–¼ AIVA v5.0 è·¨èªè¨€çµ±ä¸€æ¶æ§‹æ¨™æº–ï¼Œç³»çµ±æ€§è­˜åˆ¥äº† 12 é¡é‡è¤‡å®šç¾©å•é¡Œï¼Œä¸¦æä¾›äº†å®Œæ•´çš„ 4 éšæ®µä¿®å¾©è¨ˆåŠƒã€‚é€šéåŸ·è¡Œæ­¤ä¿®å¾©è¨ˆåŠƒï¼Œå°‡å¯¦ç¾çœŸæ­£çš„ **å–®ä¸€ä¾†æºåŸå‰‡ (SOT)**ï¼Œç¢ºä¿ AIVA ç³»çµ±çš„æ¶æ§‹ä¸€è‡´æ€§å’Œé•·æœŸå¯ç¶­è­·æ€§ã€‚

**ğŸ¯ åŸ·è¡Œç›®æ¨™**ï¼šéµå¾ª AIVA Common é–‹ç™¼è¦ç¯„ï¼Œåœ¨ 5 é€±å…§å®Œæˆæ‰€æœ‰é‡è¤‡å®šç¾©å•é¡Œä¿®å¾©ï¼Œå¯¦ç¾ 100% Schema çµ±ä¸€ï¼Œæå‡ç³»çµ±æ•´é«”å“è³ªå’Œé–‹ç™¼æ•ˆç‡ã€‚

---

**ğŸ“… å»ºç«‹æ—¥æœŸ**: 2025-11-03  
**ğŸ“ å ±å‘Šä½œè€…**: AIVA æ¶æ§‹åœ˜éšŠ  
**ğŸ”„ æ›´æ–°é »ç‡**: æ¯é€±æ›´æ–°åŸ·è¡Œé€²åº¦  
**ğŸ“Š ç‹€æ…‹è¿½è¹¤**: é€é GitHub Issues å’Œå°ˆæ¡ˆçœ‹æ¿ç®¡ç†