# ğŸ—ï¸ AIVA äº”æ¨¡çµ„æ¶æ§‹æ•´åˆéœ€æ±‚å ±å‘Š (Unified System Architecture)

## ğŸ“‹ ç¸½è¦½æ‘˜è¦

### ğŸ¯ ç³»çµ±æ¶æ§‹ç¸½è¿°
AIVA (AI-driven Vulnerability Assessment) æ¡ç”¨äº”æ¨¡çµ„åˆ†å±¤æ¶æ§‹ï¼Œå¯¦ç¾AIé©…å‹•çš„æ™ºèƒ½åŒ–æ»²é€æ¸¬è©¦å¹³å°ã€‚æ¯å€‹æ¨¡çµ„å°ˆæ³¨ç‰¹å®šè·è²¬ï¼Œé€šéæ¨™æº–åŒ–ä»‹é¢å¯¦ç¾ç„¡ç¸«å”ä½œã€‚

**æ ¸å¿ƒè¨­è¨ˆå“²å­¸**: `AIæ±ºç­– â†’ çµ±ä¸€æƒæ â†’ æ™ºèƒ½ç·¨æ’ â†’ å°ˆæ¥­æª¢æ¸¬ â†’ å…±äº«åŸºç¤`

---

## ğŸ§© æ¨¡çµ„è·è²¬æ˜ å°„

### ğŸ“Š æ¨¡çµ„é—œä¿‚åœ–
```mermaid
graph TB
    subgraph "AIVA äº”æ¨¡çµ„æ¶æ§‹"
        subgraph "æ±ºç­–å±¤"
            CORE[ğŸ§  Core Module<br/>AIæ±ºç­–å¼•æ“]
        end
        
        subgraph "åŸ·è¡Œå±¤"
            SCAN[ğŸ” Scan Module<br/>å¤šèªè¨€æƒæå¼•æ“]
            FEATURES[âš¡ Features Module<br/>ç›´æ¥æª¢æ¸¬å¯¦ç¾]
        end
        
        subgraph "å”èª¿å±¤"
            INTEGRATION[ğŸ”„ Integration Module<br/>å”èª¿ç·¨æ’ä¸­æ¨]
        end
        
        subgraph "åŸºç¤å±¤"
            COMMON[ğŸ§± Common Module<br/>å…±äº«åŸºç¤è¨­æ–½]
        end
    end
    
    CORE --> INTEGRATION
    INTEGRATION --> SCAN
    INTEGRATION --> FEATURES
    SCAN --> COMMON
    FEATURES --> COMMON
    CORE --> COMMON
    INTEGRATION --> COMMON
```

### ğŸ”— æ¨¡çµ„é–“ä¾è³´é—œä¿‚
| æºæ¨¡çµ„ | ç›®æ¨™æ¨¡çµ„ | ä¾è³´é¡å‹ | é€šä¿¡æ–¹å¼ | æ•¸æ“šæ ¼å¼ |
|-------|---------|----------|----------|----------|
| **Core** â†’ Integration | æ±ºç­–æŒ‡ä»¤ | ç•°æ­¥èª¿ç”¨ | Message Queue | AI Strategy Schema |
| **Integration** â†’ Scan | æƒæè«‹æ±‚ | ç›´æ¥èª¿ç”¨ | Function Call | Scan Config Schema |
| **Integration** â†’ Features | æª¢æ¸¬è«‹æ±‚ | ç›´æ¥èª¿ç”¨ | Function Call | Detection Config Schema |
| **æ‰€æœ‰æ¨¡çµ„** â†’ Common | åŸºç¤æœå‹™ | éœæ…‹å°å…¥ | Module Import | Standard Schemas |

---

## ğŸ¯ å¯¦éš›é‹ä½œæµç¨‹

### ğŸ’¡ ç«¯åˆ°ç«¯å·¥ä½œæµ
```
[ä½¿ç”¨è€…è¼¸å…¥] â†’ [AIåˆ†æ] â†’ [ç­–ç•¥ç”Ÿæˆ] â†’ [ä»»å‹™ç·¨æ’] â†’ [ä¸¦è¡ŒåŸ·è¡Œ] â†’ [çµæœèšåˆ] â†’ [æ™ºèƒ½å ±å‘Š]
      â†“           â†“         â†“           â†“           â†“           â†“           â†“
   ç›®æ¨™URL â†’ BioNeuron â†’ æ¸¬è©¦ç­–ç•¥ â†’ å·¥å…·é¸æ“‡ â†’ æƒæ+æª¢æ¸¬ â†’ æ¨™æº–æ ¼å¼ â†’ AIç”Ÿæˆå ±å‘Š
```

### ğŸ”„ è©³ç´°åŸ·è¡Œæ­¥é©Ÿ

#### **éšæ®µ1: AIæ±ºç­–ç”Ÿæˆ (Core Module)**
1. **ç›®æ¨™åˆ†æ**: BioNeuron AI åˆ†æç›®æ¨™ç‰¹å¾µ
2. **å¨è„…å»ºæ¨¡**: åŸºæ–¼500Måƒæ•¸æ¨¡å‹ç”Ÿæˆå¨è„…åœ–
3. **ç­–ç•¥è¦åŠƒ**: RAGçŸ¥è­˜åº«è¼”åŠ©æ±ºç­–ç”Ÿæˆ
4. **åŸ·è¡Œè¨ˆåŠƒ**: è¼¸å‡ºçµæ§‹åŒ–æ¸¬è©¦ç­–ç•¥

#### **éšæ®µ2: ä»»å‹™ç·¨æ’ (Integration Module)**
1. **ç­–ç•¥è§£æ**: è§£æAIæ±ºç­–æŒ‡ä»¤
2. **èƒ½åŠ›åŒ¹é…**: æŸ¥è©¢å¯ç”¨å·¥å…·å’Œæª¢æ¸¬å™¨
3. **è³‡æºåˆ†é…**: é¿å…è¡çªçš„ä¸¦è¡Œèª¿åº¦
4. **åŸ·è¡Œå”èª¿**: çµ±ä¸€èª¿åº¦å…§å¤–éƒ¨å·¥å…·

#### **éšæ®µ3: ä¸¦è¡ŒåŸ·è¡Œ (Scan + Features Modules)**
1. **æƒæç™¼ç¾**: Python/TypeScript/Go å¤šèªè¨€æƒæ
2. **æ¼æ´æª¢æ¸¬**: å°ˆæ¥­åŒ–æª¢æ¸¬å™¨æ·±åº¦åˆ†æ
3. **è¼‰è·æ¸¬è©¦**: å‹•æ…‹ç”Ÿæˆå’Œç¹éæŠ€è¡“
4. **çµæœé©—è­‰**: å¤šé‡ç¢ºèªæ¸›å°‘èª¤å ±

#### **éšæ®µ4: çµæœæ•´åˆ (Integration â†’ Core)**
1. **æ ¼å¼çµ±ä¸€**: è½‰æ›ç‚ºSARIFæ¨™æº–æ ¼å¼
2. **çµæœèšåˆ**: å»é‡å’Œé—œè¯åˆ†æ
3. **AIå ±å‘Š**: BioNeuronç”Ÿæˆæ™ºèƒ½åŒ–å ±å‘Š
4. **çŸ¥è­˜æ›´æ–°**: ç¶“é©—å›é¥‹åˆ°RAGçŸ¥è­˜åº«

---

## ğŸ”§ æŠ€è¡“æ¶æ§‹è¦æ ¼

### ğŸ“¡ é€šä¿¡å”è­°æ¨™æº–

#### **æ¨¡çµ„é–“æ¶ˆæ¯æ ¼å¼**
```python
# AIæ±ºç­–æŒ‡ä»¤ (Core â†’ Integration)
class AIStrategyMessage:
    strategy_id: str
    target_info: TargetSchema
    test_priorities: List[str]
    resource_constraints: Dict[str, Any]
    ai_confidence: float
    execution_mode: ExecutionModeEnum

# æƒæé…ç½® (Integration â†’ Scan)  
class ScanConfigMessage:
    scan_id: str
    target: TargetSchema
    scan_types: List[ScanTypeEnum]
    parallel_limit: int
    timeout: int

# æª¢æ¸¬é…ç½® (Integration â†’ Features)
class DetectionConfigMessage:
    detection_id: str
    target: TargetSchema
    vuln_types: List[VulnerabilityTypeEnum]
    payload_config: Dict[str, Any]
    verification_level: str

# çµ±ä¸€çµæœæ ¼å¼ (All â†’ Integration)
class UnifiedResultMessage:
    result_id: str
    source_module: str
    findings: List[FindingSchema] 
    metadata: Dict[str, Any]
    execution_stats: ExecutionStatsSchema
```

#### **éŒ¯èª¤è™•ç†æ©Ÿåˆ¶**
```python
class ModuleCommunicationError(Exception):
    """æ¨¡çµ„é–“é€šä¿¡éŒ¯èª¤åŸºé¡"""
    
class AIDecisionTimeoutError(ModuleCommunicationError):
    """AIæ±ºç­–è¶…æ™‚éŒ¯èª¤"""
    
class ScanExecutionError(ModuleCommunicationError):
    """æƒæåŸ·è¡ŒéŒ¯èª¤"""
    
class IntegrationCoordinationError(ModuleCommunicationError):
    """æ•´åˆå”èª¿éŒ¯èª¤"""
```

### ğŸ—ï¸ éƒ¨ç½²æ¶æ§‹éœ€æ±‚

#### **ç³»çµ±è³‡æºé…ç½®**
```yaml
# æ•´é«”ç³»çµ±è³‡æºéœ€æ±‚
system_requirements:
  cpu_cores: 16          # æ‰€æœ‰æ¨¡çµ„ç¸½å’Œ
  memory_gb: 32          # å³°å€¼è¨˜æ†¶é«”éœ€æ±‚
  storage_gb: 100        # æ¨¡å‹+æ•¸æ“š+æ—¥èªŒ
  network_bandwidth: "1Gbps"  # é«˜é€Ÿç¶²è·¯é€£æ¥

# æ¨¡çµ„è³‡æºåˆ†é…
module_allocation:
  core_module:
    cpu_cores: 4         # AIæ¨¡å‹æ¨ç†
    memory_gb: 12        # BioNeuronè¼‰å…¥
    gpu_support: "optional"  # å¯é¸GPUåŠ é€Ÿ
    
  scan_module:
    cpu_cores: 6         # å¤šèªè¨€ä¸¦è¡Œæƒæ
    memory_gb: 12        # ç„¡é ­ç€è¦½å™¨éœ€æ±‚
    storage_gb: 20       # ç€è¦½å™¨ç·©å­˜
    
  integration_module:
    cpu_cores: 4         # ç·¨æ’å’Œå”èª¿
    memory_gb: 6         # å·¥å…·æ•´åˆ
    storage_gb: 10       # å·¥å…·å’Œé…ç½®
    
  features_module:
    cpu_cores: 2         # æª¢æ¸¬å™¨åŸ·è¡Œ
    memory_gb: 2         # è¼‰è·å’Œåˆ†æ
    storage_gb: 5        # æª¢æ¸¬è¦å‰‡
```

#### **é«˜å¯ç”¨æ€§è¨­è¨ˆ**
```python
class HighAvailabilityConfig:
    """é«˜å¯ç”¨æ€§é…ç½®"""
    
    # æ¨¡çµ„æ•…éšœåˆ‡æ›
    failover_config = {
        "core_module": {
            "backup_instances": 1,
            "health_check_interval": 30,
            "failover_timeout": 60
        },
        "integration_module": {
            "backup_instances": 2,
            "load_balancing": "round_robin",
            "max_retry_attempts": 3
        }
    }
    
    # æ•¸æ“šå‚™ä»½ç­–ç•¥
    backup_strategy = {
        "ai_models": "daily_backup",
        "knowledge_base": "real_time_sync",
        "scan_results": "incremental_backup"
    }
```

---

## ğŸ“ˆ æ•ˆèƒ½èˆ‡æ“´å±•æ€§

### âš¡ æ•ˆèƒ½åŸºæº–æŒ‡æ¨™

#### **ç«¯åˆ°ç«¯æ•ˆèƒ½ç›®æ¨™**
| æŒ‡æ¨™é¡å‹ | ç›®æ¨™å€¼ | æ¸¬é‡æ–¹å¼ | å‚™è¨»èªªæ˜ |
|---------|--------|----------|----------|
| **æ±ºç­–å»¶é²** | < 2ç§’ | AIç­–ç•¥ç”Ÿæˆæ™‚é–“ | Core Module |
| **æƒæé€Ÿåº¦** | 1000ç«¯å£/ç§’ | ç¶²è·¯æƒæé€Ÿç‡ | Scan Module |
| **æª¢æ¸¬æº–ç¢ºç‡** | > 90% | æ¼æ´æª¢æ¸¬ç²¾åº¦ | Features Module |
| **ä¸¦ç™¼è™•ç†** | 50å€‹ç›®æ¨™ | åŒæ™‚è™•ç†èƒ½åŠ› | Integration Module |
| **è¨˜æ†¶é«”æ•ˆç‡** | < 32GB | å³°å€¼è¨˜æ†¶é«”ä½¿ç”¨ | å…¨ç³»çµ± |
| **å¯ç”¨æ€§** | 99.5% | ç³»çµ±é‹è¡Œæ™‚é–“ | å…¨ç³»çµ± |

#### **æ°´å¹³æ“´å±•ç­–ç•¥**
```python
class HorizontalScalingConfig:
    """æ°´å¹³æ“´å±•é…ç½®"""
    
    # æ¨¡çµ„æ“´å±•è¦å‰‡
    scaling_rules = {
        "scan_module": {
            "trigger": "cpu_usage > 80%",
            "action": "add_scanner_instance",
            "max_instances": 5
        },
        "features_module": {
            "trigger": "queue_length > 100",
            "action": "add_detector_instance", 
            "max_instances": 10
        },
        "integration_module": {
            "trigger": "response_time > 5s",
            "action": "add_orchestrator_instance",
            "max_instances": 3
        }
    }
```

### ğŸ”„ è² è¼‰å‡è¡¡è¨­è¨ˆ
```mermaid
graph TB
    subgraph "è² è¼‰å‡è¡¡æ¶æ§‹"
        LB[è² è¼‰å‡è¡¡å™¨<br/>Load Balancer]
        
        subgraph "Coreå¯¦ä¾‹æ± "
            C1[Core-1<br/>BioNeuron]
            C2[Core-2<br/>BioNeuron]
        end
        
        subgraph "Integrationå¯¦ä¾‹æ± "
            I1[Integration-1<br/>Orchestrator]
            I2[Integration-2<br/>Orchestrator]
            I3[Integration-3<br/>Orchestrator]
        end
        
        subgraph "Scanå¯¦ä¾‹æ± "
            S1[Scan-1<br/>Python]
            S2[Scan-2<br/>TypeScript]
            S3[Scan-3<br/>Go]
        end
    end
    
    LB --> C1
    LB --> C2
    C1 --> I1
    C2 --> I2
    I1 --> S1
    I2 --> S2
    I3 --> S3
```

---

## ğŸ›¡ï¸ å®‰å…¨æ€§èˆ‡åˆè¦æ€§

### ğŸ”’ æ¨¡çµ„é–“å®‰å…¨é€šä¿¡
```python
class InterModuleSecurity:
    """æ¨¡çµ„é–“å®‰å…¨é€šä¿¡é…ç½®"""
    
    # èªè­‰æ©Ÿåˆ¶
    authentication = {
        "method": "jwt_token",
        "token_expiry": 3600,  # 1å°æ™‚
        "refresh_threshold": 300  # 5åˆ†é˜å‰åˆ·æ–°
    }
    
    # åŠ å¯†é€šä¿¡
    encryption = {
        "algorithm": "AES-256-GCM",
        "key_rotation": "weekly",
        "tls_version": "1.3"
    }
    
    # è¨ªå•æ§åˆ¶
    access_control = {
        "core_module": ["read_strategy", "write_results"],
        "integration_module": ["read_all", "write_coordination"],
        "scan_module": ["read_targets", "write_findings"],
        "features_module": ["read_targets", "write_detections"]
    }
```

### ğŸ“‹ åˆè¦æ€§æª¢æŸ¥æ¸…å–®
- [ ] **GDPRåˆè¦**: å€‹äººæ•¸æ“šä¿è­·å’Œè™•ç†è¨˜éŒ„
- [ ] **ISO27001**: ä¿¡æ¯å®‰å…¨ç®¡ç†é«”ç³»èªè­‰
- [ ] **NISTæ¡†æ¶**: ç¶²è·¯å®‰å…¨æ¡†æ¶éµå¾ª
- [ ] **æ»²é€æ¸¬è©¦å€«ç†**: æ˜ç¢ºæˆæ¬Šå’Œç¯„åœé™åˆ¶
- [ ] **æ•¸æ“šç•™å­˜**: ç¬¦åˆå„åœ°å€æ•¸æ“šä¿ç•™æ³•è¦

---

## ğŸ“‹ å¯¦æ–½è·¯ç·šåœ–

### ğŸ—“ï¸ é–‹ç™¼æ™‚ç¨‹è¦åŠƒ

#### **Phase 1: åŸºç¤è¨­æ–½ (4é€±)**
- [ ] Common Module å®Œæ•´å¯¦ç¾
- [ ] æ¨¡çµ„é–“é€šä¿¡å”è­°å®šç¾©
- [ ] åŸºç¤éƒ¨ç½²ç’°å¢ƒæ­å»º
- [ ] æ•¸æ“šçµæ§‹æ¨™æº–åŒ–

#### **Phase 2: æ ¸å¿ƒåŠŸèƒ½ (8é€±)**
- [ ] Core Module AIå¼•æ“å¯¦ç¾
- [ ] Scan Module å¤šèªè¨€æƒæå™¨
- [ ] åŸºç¤æ•´åˆæ¸¬è©¦
- [ ] æ•ˆèƒ½åŸºæº–å»ºç«‹

#### **Phase 3: é«˜ç´šæ•´åˆ (6é€±)**
- [ ] Integration Module å®Œæ•´ç·¨æ’
- [ ] Features Module å°ˆæ¥­æª¢æ¸¬
- [ ] å¤–éƒ¨å·¥å…·æ•´åˆ
- [ ] ç«¯åˆ°ç«¯æ¸¬è©¦

#### **Phase 4: ç”Ÿç”¢å°±ç·’ (4é€±)**
- [ ] é«˜å¯ç”¨æ€§é…ç½®
- [ ] å®‰å…¨æ€§å¼·åŒ–
- [ ] æ•ˆèƒ½èª¿å„ª
- [ ] ç›£æ§å’Œæ—¥èªŒ

### ğŸ¯ é‡Œç¨‹ç¢‘æª¢æŸ¥é»
1. **M1**: æ¨¡çµ„é–“åŸºç¤é€šä¿¡å»ºç«‹ âœ…
2. **M2**: AIæ±ºç­–å¼•æ“é›†æˆå®Œæˆ
3. **M3**: å¤šå·¥å…·çµ±ä¸€ç·¨æ’å¯¦ç¾  
4. **M4**: ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²å°±ç·’

---

## ğŸ’° ç¸½é«”æŠ•è³‡å›å ±åˆ†æ

### ğŸ“Š æˆæœ¬æ•ˆç›Šåˆ†æ
```
ç¸½é–‹ç™¼æˆæœ¬: 22é€± Ã— 5äººåœ˜éšŠ = 110äººé€±
é æœŸæ•ˆç›Š:
- æ›¿ä»£10+å•†æ¥­å®‰å…¨å·¥å…· (ç¯€ç´„å¹´è²»$200,000+)
- æ¸¬è©¦æ•ˆç‡æå‡10å€ (äººåŠ›æˆæœ¬ç¯€ç´„)
- AIé©…å‹•æº–ç¢ºç‡95%+ (æ¸›å°‘èª¤å ±æˆæœ¬)
- çµ±ä¸€å¹³å°ç¶­è­·æˆæœ¬é™ä½60%

æŠ•è³‡å›å ±é€±æœŸ: 8-12å€‹æœˆ
```

### ğŸš€ æˆ°ç•¥åƒ¹å€¼
- **æŠ€è¡“é ˜å…ˆ**: AIé©…å‹•çš„æ»²é€æ¸¬è©¦å¹³å°
- **æˆæœ¬æ§åˆ¶**: çµ±ä¸€å¹³å°æ¸›å°‘å·¥å…·ç¢ç‰‡åŒ–
- **æ•ˆç‡æå‡**: è‡ªå‹•åŒ–æ›¿ä»£äººå·¥é‡è¤‡å·¥ä½œ
- **çŸ¥è­˜ç©ç´¯**: å»ºç«‹çµ„ç¹”çš„å®‰å…¨çŸ¥è­˜è³‡ç”¢

---

**æ–‡æª”è² è²¬**: AIVA Architecture Team  
**æœ€å¾Œæ›´æ–°**: 2025å¹´11æœˆ7æ—¥  
**ç‰ˆæœ¬æ§åˆ¶**: v1.0.0 (åˆå§‹æ¶æ§‹ç‰ˆæœ¬)  
**å¯©æ ¸ç‹€æ…‹**: å¾…æŠ€è¡“å§”å“¡æœƒæ‰¹å‡†

---

*æœ¬æ–‡æª”ç‚ºAIVAäº”æ¨¡çµ„æ¶æ§‹çš„ç¸½é«”è¦åŠƒï¼Œå„æ¨¡çµ„è©³ç´°éœ€æ±‚è«‹åƒè€ƒå°æ‡‰çš„å°ˆé …å ±å‘Šæ–‡æª”ã€‚*